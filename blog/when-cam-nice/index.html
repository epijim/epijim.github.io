<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>When is it nice in Cambridge? • James Black</title>
    <meta name="description" content="Plotting when the weather is nice in Cambridge.">
    <meta name="keywords" content="r, weather, cambridge">
    
    
    	<!-- Twitter Cards -->
	<meta name="twitter:title" content="When is it nice in Cambridge?">
	<meta name="twitter:description" content="Plotting when the weather is nice in Cambridge.">
	
	
	
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:image" content="https://epijim.uk/images/weather_feature.jpg">
	
	<!-- Open Graph -->
	<meta property="og:locale" content="en_US">
	<meta property="og:type" content="article">
	<meta property="og:title" content="When is it nice in Cambridge?">
	<meta property="og:description" content="Plotting when the weather is nice in Cambridge.">
	<meta property="og:url" content="https://epijim.uk/blog/when-cam-nice/">
	<meta property="og:site_name" content="James Black">
    <link rel="author" href="https://plus.google.com/https://plus.google.com/112022213613617220776/"/>

    <link rel="canonical" href="https://epijim.uk/blog/when-cam-nice/">

    <link href="https://epijim.uk/atom.xml" type="application/atom+xml" rel="alternate" title="James Black Atom Feed">
    <link href="https://epijim.uk/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">

    <style>
    .sliding-menu-content {
      top: 0;
      right: 0;
      text-align: center;
      visibility: hidden;
      height: 100%;
      width: 100%;
      -webkit-transform: translateX(100%);
      -moz-transform: translateX(100%);
      -ms-transform: translateX(100%);
      -o-transform: translateX(100%);
      transform: translateX(100%);
    }
    </style>

    <link rel="stylesheet" href="https://epijim.uk/css/main.css">
    <!-- HTML5 Shiv and Media Query Support for IE -->
    <!--[if lt IE 9]>
      <script src="https://epijim.uk/js/vendor/html5shiv.min.js"></script>
      <script src="https://epijim.uk/js/vendor/respond.min.js"></script>
    <![endif]-->

  </head>

  <body>
    <header id="masthead">
<link rel="alternate" type="application/rss+xml" title="James Black" href="https://epijim.uk/atom.xml">
  <div class="inner-wrap">
    <a href="https://epijim.uk" class="site-title">James Black</a>
    <nav role="navigation" class="menu top-menu">
        <ul class="menu-item">
	<li class="home"><a href="/">James Black</a></li>
	
    
        
    
    <li><a href="https://epijim.uk/about/" >About</a></li>
  
    
        
    
    <li><a href="https://epijim.uk/my-papers/" >Papers</a></li>
  
    
        
    
    <li><a href="https://epijim.uk/code/" >Code</a></li>
  
    
        
    
    <li><a href="https://epijim.uk/blog/" >Blog</a></li>
  
    
        
    
    <li><a href="https://epijim.uk/courses/" >Courses</a></li>
  
</ul>
    </nav>
  </div><!-- /.inner-wrap -->
</header><!-- /.masthead -->

    <nav role="navigation" class="js-menu sliding-menu-content">
	<ul class="menu-item">
		<li>
      
        
      
			<a href="https://epijim.uk/about/"><img src="https://epijim.uk/images/about_thumb.jpeg" alt="teaser" class="teaser"></a>
			<a href="https://epijim.uk/about/" class="title">About</a>
			<p class="excerpt">Get more information on, or contact, James Black.</p>
		</li><li>
      
        
      
			<a href="https://epijim.uk/my-papers/"><img src="https://epijim.uk/images/papers_thumb.png" alt="teaser" class="teaser"></a>
			<a href="https://epijim.uk/my-papers/" class="title">Papers</a>
			<p class="excerpt">My published journal articles.</p>
		</li><li>
      
        
      
			<a href="https://epijim.uk/code/"><img src="https://epijim.uk/images/code_thumb.png" alt="teaser" class="teaser"></a>
			<a href="https://epijim.uk/code/" class="title">Code</a>
			<p class="excerpt">A collection of code snippets I think are really useful.</p>
		</li><li>
      
        
      
			<a href="https://epijim.uk/blog/"><img src="https://epijim.uk/images/blog_thumb.jpg" alt="teaser" class="teaser"></a>
			<a href="https://epijim.uk/blog/" class="title">Blog</a>
			<p class="excerpt">My data based blog.</p>
		</li><li>
      
        
      
			<a href="https://epijim.uk/courses/"><img src="https://epijim.uk/images/courses.jpg" alt="teaser" class="teaser"></a>
			<a href="https://epijim.uk/courses/" class="title">Courses</a>
			<p class="excerpt">Courses I've done relating to R or coding</p>
		</li>
	</ul>
</nav>
<button type="button" class="js-menu-trigger sliding-menu-button menulines-button x2" role="button" aria-label="Toggle Navigation">
	<span class="menulines"></span>
</button>

<div class="js-menu-screen menu-screen"></div>

    <div id="page-wrapper">
      <!--[if lt IE 9]><div class="upgrade notice-danger"><strong>Your browser is quite old!</strong> Why not <a href="http://whatbrowser.org/">upgrade to a newer one</a> to better enjoy this site?</div><![endif]-->

      <div id="main" role="main">	
	<article class="wrap" itemscope itemtype="http://schema.org/Article">
			<div class="page-feature-header overlay">
			
			<div class="page-image">
				<img src="https://epijim.uk/images/weather_feature.jpg" class="page-feature-image" alt="When is it nice in Cambridge?" itemprop="image">
				<div class="image-credit">Image source: <a href="" itemprop="citation">Picture by Trinity College</a></div><!-- /.image-credit -->
			</div><!-- /.page-image -->
			
			<div class="page-title">
        	<h1><span>When is it nice in Cambridge?</span></h1>
        	<div class="page-meta">
  
    <span>Filed under: <a href="/tag/r/" title="r" rel="tag">r</a>, <a href="/tag/weather/" title="weather" rel="tag">weather</a>, <a href="/tag/cambridge/" title="cambridge" rel="tag">cambridge</a></span>
  
</div><!-- /.page-meta -->
			</div><!-- /.page-title -->
      	</div><!-- /.page-image-media -->
		<div class="inner-wrap">
			<nav class="toc"></nav><!-- /.toc -->
			<div id="content" class="page-content" itemprop="articleBody">
				<p>As winter descends on Cambridge (it’s currently 8°C), I wondered if winter started
 this early last year. Earlier this year I came across a post
 where someone had plotted where in America
 the weather was most consistently nice.<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> As part of the course I’m doing at the moment,
 I came across a script to call <em>Weather Underground</em> for historical weather data.<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup> Coupling
 this with R’s ability to plot calendar maps<sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup>, it’s easy to visualise when it’s nice year to year.</p>

<h2 id="an-example-calendar-map">An example calendar map</h2>

<p>Below is an example of a calendar map produced in R. The API seems to consistently give
 missing values on the same days, a few times a year, so please excuse the white spaces.
 I think the problem is with the <em>Weather Underground</em> data, as there are weird patterns to the missing data if you compare
 the API to the point and click historical values. For instance, lots of the days missing when using the
 API have a high of exactly 6.1°C when looking at the weather history via a browser.
 I was also more interested in general patterns, so I left the scale off these plots.</p>

<figure>
	<a href="/images/weather_1.png"><img src="/images/weather_1.png" /></a>
	<figcaption>Calendar map showing when it was warm in Cambridge in 2013.</figcaption>
</figure>

<h2 id="what-is-nice">What is ‘nice’</h2>

<p>In the next plot I’ve tried to categorize days into nice days (<em>in green</em>), rainy days (<em>in blue</em>)
and other days in grey. Specifically:</p>

<ul>
  <li>Green squares are days when the days maximum temperature was between 15 and 30°C and it did not rain</li>
  <li>Blue squares are days with more than 1mm of rain</li>
  <li>Grey squares are days that were too hot or too cold (and free of rain)</li>
  <li>A few squares are white due to missing data</li>
</ul>

<h2 id="when-its-nice-in-cambridge">When it’s nice in Cambridge</h2>

<figure>
  <a href="/images/weather_2.png"><img src="/images/weather_2.png" /></a>
  <figcaption>Calendar map showing when it's been nice (green) and when it has rained (blue) in Cambridge over the last few years.</figcaption>
</figure>

<p>So by the looks of things, June-September is fairly consistently when the nice weather is, and the rain
 seems to be fairly evenly distributed. In the next plot, I’ve coded temperatures like in the first
 figure. Light red is around zero, darkest red is getting towards 32°C. Blue is any day with a high
 below 0°C.</p>

<figure>
  <a href="/images/weather_3.png"><img src="/images/weather_3.png" /></a>
  <figcaption>Calendar map showing the daily highs in Cambridge. Light red is around zero, darkest red is getting towards 32&deg;C. Blue is any day with a high
  below 0&deg;C.</figcaption>
</figure>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>I’ll add a link when I find the original again. <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>The Weather Underground script is here: http://allthingsr.blogspot.co.uk/2012/04/getting-historical-weather-data-in-r.html <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>There are multiple options for plotting calendar maps in R. <code>gvisCalendar</code> from the <code>googleVis</code> package, or Nathan Yau’s custom script are two examples. <a href="#fnref:3" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

				<hr />
				<footer class="page-footer">
					


<div class="author-image">
	<img src="https://epijim.uk/images/bio-photo.jpg" alt="James Black">
</div><!-- ./author-image -->
<div class="author-content">
	<h3 class="author-name" >Written by <a href="http://epijim.uk" itemprop="author">James Black</a></h3>
	<p class="author-bio">Reading Epidemiology at Jesus College, University of Cambridge.</p>
</div><!-- ./author-content -->
					<div class="inline-btn">
	<a class="btn-social twitter" href="https://twitter.com/intent/tweet?text=When%20is%20it%20nice%20in%20Cambridge?&amp;url=https://epijim.uk/blog/when-cam-nice/&amp;via=" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i> Share on Twitter</a>
	<a class="btn-social facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://epijim.uk/blog/when-cam-nice/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i> Share on Facebook</a>
	<a class="btn-social google-plus"  href="https://plus.google.com/share?url=https://epijim.uk/blog/when-cam-nice/" target="_blank"><i class="fa fa-google-plus" aria-hidden="true"></i> Share on Google+</a>
</div><!-- /.share-this -->
					<div class="page-meta">
	<p>Updated <time datetime="2014-10-21T00:00:00Z" itemprop="datePublished">October 21, 2014</time></p>
</div><!-- /.page-meta -->
				</footer><!-- /.footer -->
				<div class="entry-related">
					<h4>Related Articles <a href="#" onclick="(function(btn){var z=document.createElement('script');document.subtomeBtn=btn;z.src='https://www.subtome.com/load.js';document.body.appendChild(z);})(this);_gaq.push(['_trackEvent', 'Link', 'Subscribe']);" data-subtome-resource="https://epijim.uk" data-subtome-feeds="http://feeds.feedburner.com/epijim"><i class="fa fa-rss fa-fw"></i></a></h4>
					<ul>
						
						<li><a href="https://epijim.uk/papers/paper5/">Parental perception of child obesity</a></li>
						
						<li><a href="https://epijim.uk/blog/when-cam-nice-app/">When is it nice in Cambridge (interactive app)?</a></li>
						
						<li><a href="https://epijim.uk/blog/crime-cambridge/">Contour mapping Cambridge crime</a></li>
						
						<li><a href="https://epijim.uk/blog/pub-crawl/">Optimum pub crawl route through all 71 Cambridge pubs</a></li>
						
					</ul>
				</div><!-- /.entry-related -->
				<aside>
				<hr />
<div id="disqus_thread"></div>
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'jamesblack';

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
				</aside>
			</div><!-- /.content -->
		</div><!-- /.inner-wrap -->
		<div class="ads"><style>
.responsive-ads { width: 300px; height: 200px; }
@media(min-width: 520px) { .responsive-ads { width: 468px; height: 60px; } }
@media(min-width: 768px) { .responsive-ads { width: 160px; height: 600px; } }
</style>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle responsive-ads"
	style="display:inline-block"
	data-ad-client="ca-pub-8433594162604860"
	data-ad-slot="9138304032"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div><!-- /.ads -->
	</article><!-- /.wrap -->
</div><!-- /#main -->



      <footer role="contentinfo" id="site-footer">
	<nav role="navigation" class="menu bottom-menu">
		<ul class="menu-item">
		
      
        
      
			<li><a href="https://epijim.uk/" >Home</a></li>
		
      
        
      
			<li><a href="https://epijim.uk/my-papers/" >Papers</a></li>
		
      
        
      
			<li><a href="https://epijim.uk/about/" >About</a></li>
		
      
        
      
			<li><a href="https://epijim.uk/terms/" >Legal</a></li>
		
      
        
        
			<li><a href="http://www.r-bloggers.com" target="_blank">R bloggers</a></li>
		
		</ul>
	</nav><!-- /.bottom-menu -->
	<p class="copyright">&#169; 2015 <a href="https://epijim.uk">James Black</a> hosted by <a href="https://pages.github.com">Github</a> and powered by <a href="http://jekyllrb.com">Jekyll</a> + <a href="http://mmistakes.github.io/skinny-bones-jekyll/">Skinny Bones</a>.</p>
<!-- google analytics -->	
<script> 
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47906301-1', 'auto');
  ga('send', 'pageview');

</script>
</footer>
    </div>

    <script src="https://epijim.uk/js/vendor/jquery-1.9.1.min.js"></script>
    <script src="https://epijim.uk/js/main.js"></script>
    
    
    <script type="text/javascript">
      $('.toc').toc({
        'selectors': 'h2', //elements to use as headings
        'container': '.page-content', //element to find all selectors in
        'smoothScrolling': true, //enable or disable smooth scrolling on click
        'prefix': 'toc', //prefix for anchor tags and class names
        'onHighlight': function(el) {}, //called when a new section is highlighted 
        'highlightOnScroll': true, //add class to heading that is currently in focus
        'highlightOffset': 100, //offset to trigger the next headline
        'anchorName': function(i, heading, prefix) { //custom function for anchor name
          return prefix+i;
        },
        'headerText': function(i, heading, $heading) { //custom function building the header-item text
          return $heading.text();
        },
        'itemClass': function(i, heading, $heading, prefix) { //custom function for item class
          return $heading[0].tagName.toLowerCase();
        }
      });
    </script>
    

  </body>

</html>
