<!doctype html>
<!--[if lt IE 7]><html class="lt-ie9 lt-ie8 lt-ie7 no-js" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="lt-ie9 lt-ie8 no-js" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="lt-ie9 no-js" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" class="no-js"><!--<![endif]-->

<head>
	<meta charset="utf-8">
	<title>My google scholar profile &#8211; James Black</title>
	<meta name="description" content="My google scholar profile.">
	<meta name="keywords" content="R, Google Scholar">
	<!-- Twitter Cards -->
	
		<meta name="twitter:card" content="summary">
			<meta name="twitter:image" content="http://www.epijim.co.uk/images/scholar_thumb.png">
		
	
	<meta name="twitter:title" content="My google scholar profile">
	<meta name="twitter:description" content="My google scholar profile.">
	<meta name="twitter:site" content="@">
	<meta name="twitter:creator" content="@">
	<!-- Open Graph -->
	<meta property="og:locale" content="en_US">
	<meta property="og:type" content="article">
	<meta property="og:title" content="My google scholar profile">
	<meta property="og:description" content="My google scholar profile.">
	<meta property="og:url" content="http://www.epijim.co.uk/articles/scholar/">
	<meta property="og:site_name" content="James Black">

	<!-- Webmaster Tools verifications -->
	
	

	
	<link rel="canonical" href="http://www.epijim.co.uk/articles/scholar/">
	<link href="http://feeds.feedburner.com/epijim" type="application/atom+xml" rel="alternate" title="James Black &#8211; Everything Feed">
	<link rel="author" href="https://plus.google.com/112022213613617220776/?rel=author">

	<!-- http://t.co/dKP3o1e -->
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<meta http-equiv="cleartype" content="on">

	<!-- For all browsers -->
	<link rel="stylesheet" href="http://www.epijim.co.uk/css/main.min-b18f500fc8710c1f7acf8c04b0249d6f.css">

	<!-- Web fonts -->
	<script src="//use.edgefonts.net/lato:n3,i3,n4,i4,n7.js"></script>
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">

	<!-- HTML5 Shiv and Media Query Support -->
	<!--[if lt IE 9]>
		<script src="http://www.epijim.co.uk/js/vendor/html5shiv-5a98a86b5cb48c1506f338463259ce41.js"></script>
		<script src="http://www.epijim.co.uk/js/vendor/respond-e5d7fffb3a9f891c926ee1b836d448d8.js"></script>
	<![endif]-->

	<!-- Icons -->
	<!-- 16x16 -->
	<link rel="shortcut icon" href="http://www.epijim.co.uk/favicon.ico">
	<!-- 32x32 -->
	<link rel="shortcut icon" href="http://www.epijim.co.uk/favicon.png">
	<!-- non-retina iPhone pre iOS 7 -->
	<link rel="apple-touch-icon-precomposed" href="http://www.epijim.co.uk/images/icon57.png" sizes="57x57">
	<!-- non-retina iPad pre iOS 7 -->
	<link rel="apple-touch-icon-precomposed" href="http://www.epijim.co.uk/images/icon72.png" sizes="72x72">
	<!-- non-retina iPad iOS 7 -->
	<link rel="apple-touch-icon" href="http://www.epijim.co.uk/images/icon76.png" sizes="76x76">
	<!-- retina iPhone pre iOS 7 -->
	<link rel="apple-touch-icon-precomposed" href="http://www.epijim.co.uk/images/icon114.png" sizes="114x114">
	<!-- retina iPhone iOS 7 -->
	<link rel="apple-touch-icon" href="http://www.epijim.co.uk/images/icon120.png" sizes="120x120">
	<!-- retina iPad pre iOS 7 -->
	<link rel="apple-touch-icon-precomposed" href="http://www.epijim.co.uk/images/icon144.png" sizes="144x144">
	<!-- retina iPad iOS 7 -->
	<link rel="apple-touch-icon" href="http://www.epijim.co.uk/images/icon152.png" sizes="152x152">
	
		<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47906301-1', 'epijim.co.uk');
  ga('send', 'pageview');

</script>
</head>


<body id="post">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a newer one to better enjoy this site?</a></div><![endif]-->
<div class="masthead-wrapper">
	<header id="masthead" itemscope itemtype="http://schema.org/Organization">
		<a href="http://www.epijim.co.uk" class="site-logo" rel="home" title="James Black" itemprop="url"><img src="http://www.epijim.co.uk/images/jimmy_logo.png" width="50" height="50" alt="James Black logo" itemprop="logo"></a>
		<span class="site-title" itemprop="name"><a href="http://www.epijim.co.uk">James Black</a></span>
	</header><!-- /.masthead -->
	<nav role="navigation" id="site-nav" class="nav">
		<ul>
		
			<li itemscope itemtype="http://schema.org/SiteNavigationElement"><a href="http://www.epijim.co.uk/" itemprop="url"><span itemprop="name">Home</span></a></li>
		
			<li itemscope itemtype="http://schema.org/SiteNavigationElement"><a href="http://www.epijim.co.uk/blog/" itemprop="url"><span itemprop="name">Blog</span></a></li>
		
			<li itemscope itemtype="http://schema.org/SiteNavigationElement"><a href="http://www.epijim.co.uk/plots/" itemprop="url"><span itemprop="name">Gallery</span></a></li>
		
			<li itemscope itemtype="http://schema.org/SiteNavigationElement"><a href="http://www.epijim.co.uk/my-papers/" itemprop="url"><span itemprop="name">My papers</span></a></li>
		
			<li itemscope itemtype="http://schema.org/SiteNavigationElement"><a href="http://www.epijim.co.uk/about/" itemprop="url"><span itemprop="name">About me</span></a></li>
		
		</ul>
	</nav><!-- /#site-nav -->
</div><!-- /.entry-wrapper -->

<div id="main" role="main">
		<article class="hentry" itemscope itemtype="http://schema.org/Article">
		<header class="entry-header">
		
			<h1 class="entry-title" itemprop="name">My google scholar profile</h1>
		</header>
		<div class="entry-wrapper">
			<div class="entry-content" itemprop="articleBody">
				<figure>
	<a href="/images/scholar_2014-02-16.png"><img src="/images/scholar_2014-02-16.png" /></a>
	<figcaption>Google scholar wordcloud from 16th Feb, 2014. Authors on left, title of papers on right.</figcaption>
</figure>

<p>The script below allows you to scrape google scholar and pull data about any
 author with a profile page. Above is an example from my page, taken on the 16th of February 2014. 
 On the left are my co-authors, names sized by how many papers we co-authored, 
 and on the right are the words from the titles of my papers.</p>

<p>Below is a table created by the script that shows details on each of my papers, scraped from
 google scholar.</p>

<!-- Table generated in R 3.0.2 by googleVis 0.4.7 package -->
<!-- Sun Feb 16 13:29:36 2014 -->
<!-- jsHeader -->
<script type="text/javascript">
 
// jsData 
function gvisDataTableID157ed78abf520 () {
var data = new google.visualization.DataTable();
var datajson =
[
 [
 "Disability-adjusted life years (DALYs) for 291 diseases and injuries in 21 regions, 1990-2010: a systematic analysis for the Global Burden of Disease Study 2010",
"2013",
"The Lancet 380 (9859), 2197-2223",
false,
"531" 
],
[
 "Years lived with disability (YLDs) for 1160 sequelae of 289 diseases and injuries 1990-2010: a systematic analysis for the Global Burden of Disease Study 2010",
"2013",
"The Lancet 380 (9859), 2163-2196",
false,
"347" 
],
[
 "Outcome after injury--a systematic literature search of studies using the EQ-5D",
"2009",
"Journal of Trauma and Acute Care Surgery 67 (4), 883-890",
false,
"16" 
],
[
 "Recovery after injury: an individual patient data meta-analysis of general health status using the EQ-5D",
"2011",
"Journal of Trauma and Acute Care Surgery 71 (4), 1003-1010",
true,
"8" 
],
[
 "Bariatric surgery for obese children and adolescents: a systematic review and meta-analysis",
"2013",
"Obesity Reviews 14 (8), 634-44",
true,
"5" 
],
[
 "Scoping the impact of the national child measurement programme feedback on the child obesity pathway: study protocol",
"2012",
"BMC public health 12 (1), 783",
false,
"5" 
] 
];
data.addColumn('string','Title');
data.addColumn('string','Year');
data.addColumn('string','Reference');
data.addColumn('boolean','First author');
data.addColumn('string','Citations');
data.addRows(datajson);
return(data);
}
 
// jsDrawChart
function drawChartTableID157ed78abf520() {
var data = gvisDataTableID157ed78abf520();
var options = {};
options["allowHtml"] = true;
options["width"] =    600;
options["height"] =    500;


    var chart = new google.visualization.Table(
    document.getElementById('TableID157ed78abf520')
    );
    chart.draw(data,options);
    

}
  
 
// jsDisplayChart
(function() {
var pkgs = window.__gvisPackages = window.__gvisPackages || [];
var callbacks = window.__gvisCallbacks = window.__gvisCallbacks || [];
var chartid = "table";
  
// Manually see if chartid is in pkgs (not all browsers support Array.indexOf)
var i, newPackage = true;
for (i = 0; newPackage && i < pkgs.length; i++) {
if (pkgs[i] === chartid)
newPackage = false;
}
if (newPackage)
  pkgs.push(chartid);
  
// Add the drawChart function to the global list of callbacks
callbacks.push(drawChartTableID157ed78abf520);
})();
function displayChartTableID157ed78abf520() {
  var pkgs = window.__gvisPackages = window.__gvisPackages || [];
  var callbacks = window.__gvisCallbacks = window.__gvisCallbacks || [];
  window.clearTimeout(window.__gvisLoad);
  // The timeout is set to 100 because otherwise the container div we are
  // targeting might not be part of the document yet
  window.__gvisLoad = setTimeout(function() {
  var pkgCount = pkgs.length;
  google.load("visualization", "1", { packages:pkgs, callback: function() {
  if (pkgCount != pkgs.length) {
  // Race condition where another setTimeout call snuck in after us; if
  // that call added a package, we must not shift its callback
  return;
}
while (callbacks.length > 0)
callbacks.shift()();
} });
}, 100);
}
 
// jsFooter
</script>

<!-- jsChart -->
<script type="text/javascript" src="https://www.google.com/jsapi?callback=displayChartTableID157ed78abf520"></script>

<!-- divChart -->

<div id="TableID157ed78abf520" style="width: 600px; height: 500px;">
</div>

<p>R code to scrape google scholar is below. Full credit goes to R bloggers, although that post
 is a few years old and needed the author
 function fixed and some quotation marks added to make it work.</p>

<div class="highlight"><pre><code class="r">getPckg <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>pckg<span class="p">)</span> install.packages<span class="p">(</span>pckg<span class="p">,</span> repos <span class="o">=</span> <span class="s">&quot;http://cran.r-project.org&quot;</span><span class="p">)</span>
 
pckg <span class="o">=</span> try<span class="p">(</span>require<span class="p">(</span>wordcloud<span class="p">))</span>
<span class="kr">if</span><span class="p">(</span><span class="o">!</span>pckg<span class="p">)</span> <span class="p">{</span>
  cat<span class="p">(</span><span class="s">&quot;Installing &#39;wordcloud&#39; from CRAN\n&quot;</span><span class="p">)</span>
  getPckg<span class="p">(</span><span class="s">&quot;wordcloud&quot;</span><span class="p">)</span>
  require<span class="p">(</span><span class="s">&quot;wordcloud&quot;</span><span class="p">)</span>
<span class="p">}</span>
pckg <span class="o">=</span> try<span class="p">(</span>require<span class="p">(</span>tm<span class="p">))</span>
<span class="kr">if</span><span class="p">(</span><span class="o">!</span>pckg<span class="p">)</span> <span class="p">{</span>
  cat<span class="p">(</span><span class="s">&quot;Installing &#39;tm&#39; from CRAN\n&quot;</span><span class="p">)</span>
  getPckg<span class="p">(</span><span class="s">&quot;tm&quot;</span><span class="p">)</span>
  require<span class="p">(</span><span class="s">&quot;tm&quot;</span><span class="p">)</span>
<span class="p">}</span>
pckg <span class="o">=</span> try<span class="p">(</span>require<span class="p">(</span>sendmailR<span class="p">))</span>
<span class="kr">if</span><span class="p">(</span><span class="o">!</span>pckg<span class="p">)</span> <span class="p">{</span>
  cat<span class="p">(</span><span class="s">&quot;Installing &#39;sendmailR&#39; from CRAN\n&quot;</span><span class="p">)</span>
  getPckg<span class="p">(</span><span class="s">&quot;sendmailR&quot;</span><span class="p">)</span>
  require<span class="p">(</span><span class="s">&quot;sendmailR&quot;</span><span class="p">)</span>
<span class="p">}</span>
pckg <span class="o">=</span> try<span class="p">(</span>require<span class="p">(</span>RColorBrewer<span class="p">))</span>
<span class="kr">if</span><span class="p">(</span><span class="o">!</span>pckg<span class="p">)</span> <span class="p">{</span>
  cat<span class="p">(</span><span class="s">&quot;Installing &#39;RColorBrewer&#39; from Bioconductor\n&quot;</span><span class="p">)</span>
  getPckg<span class="p">(</span><span class="s">&quot;RColorBrewer&quot;</span><span class="p">)</span>
  require<span class="p">(</span><span class="s">&quot;RColorBrewer&quot;</span><span class="p">)</span>
<span class="p">}</span>
 
<span class="c1"># helper functions</span>
googleCite <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>theurl<span class="p">,</span> plotIt <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span>pdfname<span class="o">=</span><span class="kc">NULL</span><span class="p">)</span> <span class="p">{</span>
  
  theurl <span class="o">=</span> strsplit<span class="p">(</span>theurl<span class="p">,</span><span class="s">&quot;&amp;hl&quot;</span><span class="p">)[[</span><span class="m">1</span><span class="p">]][</span><span class="m">1</span><span class="p">]</span>
  alldata <span class="o">&lt;-</span> <span class="kc">NULL</span>
  
  author <span class="o">=</span> <span class="s">&quot;James Black&quot;</span>
  
  <span class="kr">for</span> <span class="p">(</span>ipage <span class="kr">in</span> <span class="m">0</span><span class="o">:</span><span class="m">1000</span><span class="p">){</span>
    checker <span class="o">&lt;-</span> ipage <span class="o">*</span> <span class="m">100</span>
    page <span class="o">=</span> paste<span class="p">(</span>theurl<span class="p">,</span> <span class="s">&quot;&amp;view_op=list_works&amp;pagesize=100&amp;cstart=&quot;</span><span class="p">,</span> checker<span class="p">,</span> sep<span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
    temper <span class="o">&lt;-</span> getcites<span class="p">(</span>page<span class="p">,</span> checkcite<span class="o">=</span>checker<span class="p">)</span>
    alldata <span class="o">&lt;-</span> rbind<span class="p">(</span>alldata<span class="p">,</span> temper<span class="o">$</span>data<span class="p">)</span>
    <span class="kr">if</span> <span class="p">(</span>temper<span class="o">$</span>stopit <span class="o">==</span> <span class="m">1</span><span class="p">)</span> <span class="kr">break</span>
  <span class="p">}</span>
  
  alldata<span class="o">$</span><span class="s">&quot;First Author&quot;</span> <span class="o">&lt;-</span> <span class="kc">NA</span>
  alldata<span class="o">$</span><span class="s">&quot;Second Author&quot;</span> <span class="o">&lt;-</span> <span class="kc">NA</span>
  alldata<span class="o">$</span><span class="s">&quot;Last Author&quot;</span> <span class="o">&lt;-</span> <span class="kc">NA</span>
  alldata<span class="o">$</span><span class="s">&quot;N Authors&quot;</span> <span class="o">&lt;-</span> <span class="kc">NA</span>
  
  <span class="kr">for</span><span class="p">(</span>irow <span class="kr">in</span> <span class="m">1</span><span class="o">:</span>nrow<span class="p">(</span>alldata<span class="p">)){</span>
    tmp <span class="o">=</span> strsplit<span class="p">(</span>alldata<span class="o">$</span>Author<span class="p">[</span>irow<span class="p">],</span> <span class="s">&quot;,&quot;</span><span class="p">)[[</span><span class="m">1</span><span class="p">]]</span>
    
    alldata<span class="o">$</span><span class="s">&quot;First Author&quot;</span><span class="p">[</span>irow<span class="p">]</span> <span class="o">&lt;-</span> tmp<span class="p">[</span><span class="m">1</span><span class="p">]</span>
    alldata<span class="o">$</span><span class="s">&quot;Second Author&quot;</span><span class="p">[</span>irow<span class="p">]</span> <span class="o">&lt;-</span> tmp<span class="p">[</span><span class="m">2</span><span class="p">]</span>
    alldata<span class="o">$</span><span class="s">&quot;Last Author&quot;</span><span class="p">[</span>irow<span class="p">]</span> <span class="o">&lt;-</span> tmp<span class="p">[</span>length<span class="p">(</span>tmp<span class="p">)]</span>
    alldata<span class="o">$</span><span class="s">&quot;N Authors&quot;</span><span class="p">[</span>irow<span class="p">]</span> <span class="o">&lt;-</span> length<span class="p">(</span>tmp<span class="p">)</span>
    
  <span class="p">}</span>
  
  alldata<span class="o">$</span>Is_First <span class="o">&lt;-</span> grepl<span class="p">(</span>alldata<span class="o">$</span><span class="s">&quot;First Author&quot;</span><span class="p">,</span> pattern<span class="o">=</span>author<span class="p">)</span>
  alldata<span class="o">$</span>Is_Second <span class="o">&lt;-</span> grepl<span class="p">(</span>alldata<span class="o">$</span><span class="s">&quot;Second Author&quot;</span><span class="p">,</span>pattern<span class="o">=</span>author<span class="p">)</span>
  alldata<span class="o">$</span>Is_Last <span class="o">&lt;-</span> grepl<span class="p">(</span>alldata<span class="o">$</span><span class="s">&quot;Last Author&quot;</span><span class="p">,</span>pattern<span class="o">=</span>author<span class="p">)</span>
  
  alldata<span class="o">$</span><span class="s">&quot;First Author&quot;</span> <span class="o">&lt;-</span> <span class="kc">NULL</span>
  alldata<span class="o">$</span><span class="s">&quot;Second Author&quot;</span> <span class="o">&lt;-</span> <span class="kc">NULL</span>
  alldata<span class="o">$</span><span class="s">&quot;Last Author&quot;</span> <span class="o">&lt;-</span> <span class="kc">NULL</span>
  
  
  <span class="kr">if</span><span class="p">(</span>plotIt<span class="p">)</span> <span class="p">{</span>
    <span class="kr">if</span> <span class="p">(</span><span class="o">!</span>is.null<span class="p">(</span>pdfname<span class="p">))</span> pdf<span class="p">(</span>pdfname<span class="p">,</span> h <span class="o">=</span> <span class="m">6</span><span class="p">,</span> w <span class="o">=</span> <span class="m">12</span><span class="p">)</span>
    
    par<span class="p">(</span>mfrow <span class="o">=</span> c<span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">))</span>
    makeAuthorCloud<span class="p">(</span>alldata<span class="p">)</span>
    makePaperCloud<span class="p">(</span>alldata<span class="p">)</span>
    
    <span class="kr">if</span> <span class="p">(</span><span class="o">!</span>is.null<span class="p">(</span>pdfname<span class="p">))</span> dev.off<span class="p">()</span>
  <span class="p">}</span>
  
  from <span class="o">&lt;-</span> sprintf<span class="p">(</span><span class="s">&quot;&lt;sendmailR@%s&gt;&quot;</span><span class="p">,</span> Sys.info<span class="p">()[</span><span class="m">4</span><span class="p">])</span>
  to <span class="o">&lt;-</span> <span class="s">&quot;&lt;simplystatisticsgs@gmail.com&gt;&quot;</span>
  subject <span class="o">&lt;-</span> author
  body <span class="o">&lt;-</span> list<span class="p">(</span>theurl<span class="p">,</span> mime_part<span class="p">(</span>alldata<span class="p">))</span>
  tmpEmail <span class="o">=</span> try<span class="p">(</span>email <span class="o">&lt;-</span> sendmail<span class="p">(</span>from<span class="p">,</span> to<span class="p">,</span> subject<span class="p">,</span> body<span class="p">,</span> control<span class="o">=</span>list<span class="p">(</span>smtpServer<span class="o">=</span><span class="s">&quot;ASPMX.L.GOOGLE.COM&quot;</span><span class="p">)),</span>silent<span class="o">=</span><span class="k-Variable">T</span><span class="p">)</span>
  
  <span class="kr">return</span><span class="p">(</span>alldata<span class="p">)</span>
<span class="p">}</span>
 
getAuthor <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>webpage<span class="p">)</span> <span class="p">{</span>
  options<span class="p">(</span>warn <span class="o">=</span> <span class="m">-1</span><span class="p">)</span>
  con <span class="o">&lt;-</span> url<span class="p">(</span>webpage<span class="p">)</span>
  x <span class="o">&lt;-</span> readLines<span class="p">(</span>con<span class="p">,</span>encoding<span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">)</span>
  y <span class="o">&lt;-</span> strsplit<span class="p">(</span>x<span class="p">,</span> split<span class="o">=</span><span class="s">&quot;&lt;&quot;</span><span class="p">)</span>
  z <span class="o">&lt;-</span> y<span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
  tmp <span class="o">=</span> z<span class="p">[</span><span class="m">6</span><span class="p">]</span>
  tmp2 <span class="o">=</span> strsplit<span class="p">(</span>tmp<span class="p">,</span> <span class="s">&quot; &quot;</span><span class="p">)[[</span><span class="m">1</span><span class="p">]]</span>
  ind <span class="o">=</span> grep<span class="p">(</span><span class="s">&quot;-&quot;</span><span class="p">,</span> tmp2<span class="p">)</span>
  out <span class="o">=</span> tmp2<span class="p">[</span>ind<span class="m">-1</span><span class="p">]</span>
  close<span class="p">(</span>con<span class="p">)</span>
  <span class="kr">return</span><span class="p">(</span>out<span class="p">)</span>
<span class="p">}</span>
 
getcites <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>page<span class="p">,</span> checkcite<span class="p">){</span>
  old.locale <span class="o">&lt;-</span> Sys.getlocale<span class="p">()</span>
  Sys.setlocale<span class="p">(</span>locale<span class="o">=</span><span class="s">&quot;C&quot;</span><span class="p">)</span>
  options<span class="p">(</span>warn <span class="o">=</span> <span class="m">-1</span><span class="p">)</span>
  con <span class="o">&lt;-</span> url<span class="p">(</span>page<span class="p">)</span>
  x <span class="o">&lt;-</span> readLines<span class="p">(</span>con<span class="p">)</span>
  x <span class="o">&lt;-</span> strsplit<span class="p">(</span>x<span class="p">,</span> split<span class="o">=</span><span class="s">&quot;&lt;&quot;</span><span class="p">)</span>
  x <span class="o">&lt;-</span> x<span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
  
  <span class="c1">### grab the end of citations</span>
  endcites <span class="o">&lt;-</span> x<span class="p">[</span>grep<span class="p">(</span>pattern<span class="o">=</span><span class="s">&quot;margin: 0 0.5em 0 0.5em;\&quot;&gt;&quot;</span><span class="p">,</span> x<span class="o">=</span>x<span class="p">)[</span><span class="m">1</span><span class="p">]]</span>
  endcites <span class="o">&lt;-</span> strsplit<span class="p">(</span>endcites<span class="p">,</span> split<span class="o">=</span><span class="s">&quot;margin: 0 0.5em 0 0.5em;\&quot;&gt;&quot;</span><span class="p">)[[</span><span class="m">1</span><span class="p">]][</span><span class="m">2</span><span class="p">]</span>
  endcites <span class="o">&lt;-</span> as.numeric<span class="p">(</span>strsplit<span class="p">(</span>endcites<span class="p">,</span> split<span class="o">=</span><span class="s">&quot;-&quot;</span><span class="p">)[[</span><span class="m">1</span><span class="p">]][</span><span class="m">2</span><span class="p">])</span>
  
  stopit <span class="o">&lt;-</span> <span class="m">0</span>
  <span class="c1"># print(checkcite)</span>
  <span class="c1"># print(endcites)</span>
  <span class="kr">if</span> <span class="p">(</span>is.na<span class="p">(</span>endcites<span class="p">))</span> <span class="kr">return</span><span class="p">(</span>list<span class="p">(</span>data<span class="o">=</span><span class="kc">NULL</span><span class="p">,</span> stopit<span class="o">=</span><span class="m">1</span><span class="p">))</span>
  <span class="kr">if</span> <span class="p">(</span>endcites <span class="o">&lt;</span> checkcite<span class="p">)</span> stopit <span class="o">&lt;-</span> <span class="m">1</span>
  
  keepers <span class="o">&lt;-</span> grep<span class="p">(</span>pattern<span class="o">=</span><span class="s">&quot;cit-table&quot;</span><span class="p">,</span> x<span class="p">)</span>
  keepers <span class="o">&lt;-</span> keepers<span class="p">[</span><span class="m">-1</span><span class="p">]</span>
  keepers <span class="o">&lt;-</span> keepers<span class="p">[</span><span class="m">-1</span><span class="p">]</span>
  keepers <span class="o">&lt;-</span> c<span class="p">(</span>keepers<span class="p">,</span> length<span class="p">(</span>x<span class="p">))</span>
  x <span class="o">&lt;-</span> x<span class="p">[</span>keepers<span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="o">:</span>keepers<span class="p">[</span>length<span class="p">(</span>keepers<span class="p">)]]</span>
  cites <span class="o">&lt;-</span> grep<span class="p">(</span>x<span class="p">,</span> pattern<span class="o">=</span><span class="s">&quot;cit-table item&quot;</span><span class="p">)</span>
  cites <span class="o">&lt;-</span> unique<span class="p">(</span>c<span class="p">(</span>cites<span class="p">,</span> length<span class="p">(</span>x<span class="p">)))</span>
  cit <span class="o">&lt;-</span> vector<span class="p">(</span>mode<span class="o">=</span><span class="s">&quot;list&quot;</span><span class="p">,</span> length<span class="o">=</span>length<span class="p">(</span>cites<span class="p">)</span><span class="m">-1</span><span class="p">)</span>
  ncites <span class="o">&lt;-</span> length<span class="p">(</span>cites<span class="p">)</span><span class="m">-1</span>
  
  data <span class="o">&lt;-</span> <span class="kc">NULL</span>
  
  <span class="kr">for</span><span class="p">(</span>icite <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="p">(</span>length<span class="p">(</span>cites<span class="p">)</span> <span class="m">-1</span><span class="p">)</span> <span class="p">){</span>
    <span class="c1"># print(icite)</span>
    temp_data <span class="o">&lt;-</span> data.frame<span class="p">(</span>matrix<span class="p">(</span>nrow<span class="o">=</span><span class="m">1</span><span class="p">,</span> ncol<span class="o">=</span><span class="m">5</span><span class="p">))</span>
    temp <span class="o">&lt;-</span> x<span class="p">[</span> cites<span class="p">[</span>icite<span class="p">]</span><span class="o">:</span>cites<span class="p">[</span>icite<span class="m">+1</span><span class="p">]</span> <span class="p">]</span>
    tites <span class="o">&lt;-</span> grep<span class="p">(</span>pattern<span class="o">=</span><span class="s">&quot;cit-dark-large-link&quot;</span><span class="p">,</span> temp<span class="p">)</span>
    <span class="kr">if</span> <span class="p">(</span>length<span class="p">(</span>tites<span class="p">)</span> <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span> temp_data<span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">]</span> <span class="o">&lt;-</span> strsplit<span class="p">(</span>temp<span class="p">[</span>tites<span class="p">],</span> split<span class="o">=</span><span class="s">&quot;cit-dark-large-link\&quot;&gt;&quot;</span><span class="p">)[[</span><span class="m">1</span><span class="p">]][</span><span class="m">2</span><span class="p">]</span>
    
    tites <span class="o">&lt;-</span> grep<span class="p">(</span>pattern<span class="o">=</span><span class="s">&quot;cit-gray&quot;</span><span class="p">,</span> temp<span class="p">)</span>
    temp2 <span class="o">&lt;-</span> strsplit<span class="p">(</span>temp<span class="p">[</span>tites<span class="p">],</span> split<span class="o">=</span><span class="s">&quot;\&quot;cit-gray\&quot;&gt;&quot;</span><span class="p">)</span>
    <span class="kr">if</span> <span class="p">(</span>length<span class="p">(</span>tites<span class="p">)</span> <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span> temp_data<span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">]</span> <span class="o">&lt;-</span> temp2<span class="p">[[</span><span class="m">1</span><span class="p">]][</span><span class="m">2</span><span class="p">]</span>  
    <span class="kr">if</span> <span class="p">(</span>length<span class="p">(</span>temp2<span class="p">)</span> <span class="o">&gt;</span> <span class="m">1</span><span class="p">)</span> temp_data<span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">]</span> <span class="o">&lt;-</span> temp2<span class="p">[[</span><span class="m">2</span><span class="p">]][</span><span class="m">2</span><span class="p">]</span>
    
    tites <span class="o">&lt;-</span> grep<span class="p">(</span>pattern<span class="o">=</span><span class="s">&quot;col-year&quot;</span><span class="p">,</span> temp<span class="p">)</span>
    <span class="kr">if</span> <span class="p">(</span>length<span class="p">(</span>tites<span class="p">)</span> <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span> temp_data<span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">4</span><span class="p">]</span> <span class="o">&lt;-</span> strsplit<span class="p">(</span>temp<span class="p">[</span>tites<span class="p">],</span> split<span class="o">=</span><span class="s">&quot;col-year\&quot;&gt;&quot;</span><span class="p">)[[</span><span class="m">1</span><span class="p">]][</span><span class="m">2</span><span class="p">]</span>
    
    tites <span class="o">&lt;-</span> grep<span class="p">(</span>pattern<span class="o">=</span><span class="s">&quot;col-citedby&quot;</span><span class="p">,</span> temp<span class="p">)</span><span class="m">+1</span>
    <span class="kr">if</span> <span class="p">(</span>length<span class="p">(</span>tites<span class="p">)</span> <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span> temp_data<span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">5</span><span class="p">]</span> <span class="o">&lt;-</span> strsplit<span class="p">(</span>temp<span class="p">[</span>tites<span class="p">],</span> split<span class="o">=</span><span class="s">&quot;\&quot;&gt;&quot;</span><span class="p">)[[</span><span class="m">1</span><span class="p">]][</span><span class="m">2</span><span class="p">]</span>
    data <span class="o">&lt;-</span> rbind<span class="p">(</span>data<span class="p">,</span> temp_data<span class="p">)</span>
  <span class="p">}</span>
  colnames<span class="p">(</span>data<span class="p">)</span> <span class="o">&lt;-</span> c<span class="p">(</span><span class="s">&quot;Paper&quot;</span><span class="p">,</span> <span class="s">&quot;Author&quot;</span><span class="p">,</span> <span class="s">&quot;Journal&quot;</span><span class="p">,</span> <span class="s">&quot;Year&quot;</span><span class="p">,</span> <span class="s">&quot;Citations&quot;</span><span class="p">)</span>
  
  data<span class="p">[,</span> <span class="s">&quot;Paper&quot;</span><span class="p">]</span> <span class="o">&lt;-</span> gsub<span class="p">(</span>x<span class="o">=</span>data<span class="p">[,</span> <span class="s">&quot;Paper&quot;</span><span class="p">],</span> pattern<span class="o">=</span><span class="s">&quot;\227&quot;</span><span class="p">,</span> replacement<span class="o">=</span><span class="s">&quot;--&quot;</span><span class="p">,</span> fixed<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
  data<span class="p">[,</span> <span class="s">&quot;Paper&quot;</span><span class="p">]</span> <span class="o">&lt;-</span> gsub<span class="p">(</span>x<span class="o">=</span>data<span class="p">[,</span> <span class="s">&quot;Paper&quot;</span><span class="p">],</span> pattern<span class="o">=</span><span class="s">&quot;&amp;#8208;&quot;</span><span class="p">,</span> replacement<span class="o">=</span><span class="s">&quot;-&quot;</span><span class="p">,</span> fixed<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
  data<span class="p">[,</span> <span class="s">&quot;Paper&quot;</span><span class="p">]</span> <span class="o">&lt;-</span> gsub<span class="p">(</span>x<span class="o">=</span>data<span class="p">[,</span> <span class="s">&quot;Paper&quot;</span><span class="p">],</span> pattern<span class="o">=</span><span class="s">&quot;&amp;#39;&quot;</span><span class="p">,</span> replacement<span class="o">=</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span> fixed<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
  
  data<span class="p">[,</span> <span class="s">&quot;Author&quot;</span><span class="p">]</span> <span class="o">&lt;-</span> gsub<span class="p">(</span>x<span class="o">=</span>data<span class="p">[,</span> <span class="s">&quot;Author&quot;</span><span class="p">],</span> pattern<span class="o">=</span><span class="s">&quot;\227&quot;</span><span class="p">,</span> replacement<span class="o">=</span><span class="s">&quot;--&quot;</span><span class="p">,</span> fixed<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
  data<span class="p">[,</span> <span class="s">&quot;Author&quot;</span><span class="p">]</span> <span class="o">&lt;-</span> gsub<span class="p">(</span>x<span class="o">=</span>data<span class="p">[,</span> <span class="s">&quot;Author&quot;</span><span class="p">],</span> pattern<span class="o">=</span><span class="s">&quot;&amp;#8208;&quot;</span><span class="p">,</span> replacement<span class="o">=</span><span class="s">&quot;-&quot;</span><span class="p">,</span> fixed<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
  data<span class="p">[,</span> <span class="s">&quot;Author&quot;</span><span class="p">]</span> <span class="o">&lt;-</span> gsub<span class="p">(</span>x<span class="o">=</span>data<span class="p">[,</span> <span class="s">&quot;Author&quot;</span><span class="p">],</span> pattern<span class="o">=</span><span class="s">&quot;&amp;#39;&quot;</span><span class="p">,</span> replacement<span class="o">=</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span> fixed<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
  data<span class="p">[,</span> <span class="s">&quot;Author&quot;</span><span class="p">]</span> <span class="o">&lt;-</span> gsub<span class="p">(</span>x<span class="o">=</span>data<span class="p">[,</span> <span class="s">&quot;Author&quot;</span><span class="p">],</span> pattern<span class="o">=</span><span class="s">&quot;\305&quot;</span><span class="p">,</span> replacement<span class="o">=</span><span class="s">&quot;A&quot;</span><span class="p">,</span> fixed<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
  
  close<span class="p">(</span>con<span class="p">)</span>
  <span class="kr">return</span><span class="p">(</span>list<span class="p">(</span>data<span class="o">=</span>data<span class="p">,</span> stopit<span class="o">=</span>stopit<span class="p">))</span>
  Sys.setlocale<span class="p">(</span>locale<span class="o">=</span>old.locale<span class="p">)</span>
  
<span class="p">}</span>
 
getPckg <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>pckg<span class="p">)</span> install.packages<span class="p">(</span>pckg<span class="p">,</span> repos <span class="o">=</span> <span class="s">&quot;http://cran.r-project.org&quot;</span><span class="p">)</span>
 
makeAuthorCloud <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>tab<span class="p">)</span> <span class="p">{</span>
  
  colIndex <span class="o">=</span> which<span class="p">(</span>names<span class="p">(</span>tab<span class="p">)</span> <span class="o">==</span> <span class="s">&quot;Author&quot;</span><span class="p">)</span>
  
  tmp <span class="o">=</span> strsplit<span class="p">(</span>as.character<span class="p">(</span>tab<span class="p">[,</span>colIndex<span class="p">]),</span> <span class="s">&quot;, &quot;</span><span class="p">)</span>
  out <span class="o">=</span> sapply<span class="p">(</span>tmp<span class="p">,</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> <span class="p">{</span>
    x <span class="o">=</span> strsplit<span class="p">(</span>x<span class="p">,</span> <span class="s">&quot; &quot;</span><span class="p">)</span>
    x <span class="o">=</span> sapply<span class="p">(</span>x<span class="p">,</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> x<span class="p">[</span><span class="m">2</span><span class="p">])</span>
    x <span class="o">=</span> tolower<span class="p">(</span>x<span class="p">)</span>
    <span class="kr">return</span><span class="p">(</span>x<span class="p">)})</span>
  out <span class="o">=</span> unlist<span class="p">(</span>out<span class="p">)</span>
  tmp2 <span class="o">=</span> table<span class="p">(</span>out<span class="p">)</span>
  tmp2 <span class="o">=</span> tmp2<span class="p">[</span><span class="o">!</span><span class="p">(</span>names<span class="p">(</span>tmp2<span class="p">)</span> <span class="o">==</span> <span class="s">&quot;...&quot;</span><span class="p">)]</span>
  d <span class="o">=</span> data.frame<span class="p">(</span>word <span class="o">=</span> names<span class="p">(</span>tmp2<span class="p">),</span> freq <span class="o">=</span> tmp2<span class="p">,</span> row.names <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span>
  d <span class="o">=</span> d<span class="p">[</span>order<span class="p">(</span>d<span class="o">$</span>freq<span class="p">,</span> decreasing <span class="o">=</span> <span class="kc">TRUE</span><span class="p">),]</span>
  d <span class="o">=</span> d<span class="p">[</span><span class="m">-1</span><span class="p">,]</span>
  
  pal <span class="o">=</span> brewer.pal<span class="p">(</span><span class="m">9</span><span class="p">,</span> <span class="s">&quot;BuGn&quot;</span><span class="p">)</span> 
  pal <span class="o">&lt;-</span> pal<span class="p">[</span><span class="o">-</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">)]</span>
  
  wordcloud<span class="p">(</span>words <span class="o">=</span> d<span class="o">$</span>word<span class="p">,</span> freq <span class="o">=</span> d<span class="o">$</span>freq<span class="p">,</span> 
            min.freq <span class="o">=</span> <span class="m">1</span><span class="p">,</span> max.words <span class="o">=</span> <span class="kc">Inf</span><span class="p">,</span>
            random.order <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> 
            colors <span class="o">=</span> pal<span class="p">,</span>vfont<span class="o">=</span>c<span class="p">(</span><span class="s">&quot;sans serif&quot;</span><span class="p">,</span><span class="s">&quot;plain&quot;</span><span class="p">))</span>
<span class="p">}</span>
 
makePaperCloud <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>tab<span class="p">)</span> <span class="p">{</span>
  
  colIndex <span class="o">=</span> which<span class="p">(</span>names<span class="p">(</span>tab<span class="p">)</span> <span class="o">==</span> <span class="s">&quot;Paper&quot;</span><span class="p">)</span>
  
  corpus <span class="o">&lt;-</span> Corpus<span class="p">(</span>DataframeSource<span class="p">(</span>data.frame<span class="p">(</span>tab<span class="p">[,</span> colIndex<span class="p">])))</span>
  corpus <span class="o">&lt;-</span> tm_map<span class="p">(</span>corpus<span class="p">,</span> removePunctuation<span class="p">)</span>
  corpus <span class="o">&lt;-</span> tm_map<span class="p">(</span>corpus<span class="p">,</span> tolower<span class="p">)</span>
  corpus <span class="o">&lt;-</span> tm_map<span class="p">(</span>corpus<span class="p">,</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> removeWords<span class="p">(</span>x<span class="p">,</span> stopwords<span class="p">(</span><span class="s">&quot;english&quot;</span><span class="p">)))</span>
  
  tdm <span class="o">&lt;-</span> TermDocumentMatrix<span class="p">(</span>corpus<span class="p">)</span>
  m <span class="o">&lt;-</span> as.matrix<span class="p">(</span>tdm<span class="p">)</span>
  v <span class="o">&lt;-</span> sort<span class="p">(</span>rowSums<span class="p">(</span>m<span class="p">),</span>decreasing<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
  d <span class="o">&lt;-</span> data.frame<span class="p">(</span>word <span class="o">=</span> names<span class="p">(</span>v<span class="p">),</span>freq<span class="o">=</span>v<span class="p">)</span>
  
  pal <span class="o">=</span> brewer.pal<span class="p">(</span><span class="m">9</span><span class="p">,</span> <span class="s">&quot;RdPu&quot;</span><span class="p">)</span>
  pal <span class="o">&lt;-</span> pal<span class="p">[</span><span class="o">-</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">)]</span>
  
  wordcloud<span class="p">(</span>words <span class="o">=</span> d<span class="o">$</span>word<span class="p">,</span> freq <span class="o">=</span> d<span class="o">$</span>freq<span class="p">,</span> 
            min.freq <span class="o">=</span> <span class="m">1</span><span class="p">,</span> max.words <span class="o">=</span> <span class="kc">Inf</span><span class="p">,</span>
            random.order <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> colors <span class="o">=</span> pal<span class="p">,</span>vfont<span class="o">=</span>c<span class="p">(</span><span class="s">&quot;sans serif&quot;</span><span class="p">,</span><span class="s">&quot;plain&quot;</span><span class="p">))</span>
<span class="p">}</span>
 
searchCite <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>Author<span class="p">,</span> <span class="kc">...</span><span class="p">){</span>
  auth.names <span class="o">&lt;-</span> strsplit<span class="p">(</span>Author<span class="p">,</span> <span class="s">&quot; &quot;</span><span class="p">)[[</span><span class="m">1</span><span class="p">]]</span>
  auth.names <span class="o">&lt;-</span> paste<span class="p">(</span>auth.names<span class="p">[</span><span class="m">1</span><span class="o">:</span>length<span class="p">(</span>auth.names<span class="p">)],</span> sep<span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">,</span> collapse<span class="o">=</span><span class="s">&quot;+&quot;</span><span class="p">)</span>
  
  search.page <span class="o">&lt;-</span> paste<span class="p">(</span><span class="s">&quot;http://scholar.google.com/citations?hl=en&amp;view_op=search_authors&amp;mauthors=&quot;</span><span class="p">,</span> auth.names<span class="p">,</span> sep<span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
  thepage <span class="o">&lt;-</span> url<span class="p">(</span>search.page<span class="p">)</span>
  x <span class="o">&lt;-</span> readLines<span class="p">(</span>thepage<span class="p">)</span>
  x <span class="o">&lt;-</span> strsplit<span class="p">(</span>x<span class="p">[[</span><span class="m">1</span><span class="p">]],</span> split<span class="o">=</span><span class="s">&quot;user=&quot;</span><span class="p">)[[</span><span class="m">1</span><span class="p">]]</span>
  <span class="kr">if</span> <span class="p">(</span>length<span class="p">(</span>x<span class="p">)</span> <span class="o">&gt;</span> <span class="m">1</span><span class="p">){</span>
    <span class="c1">### if they have someone for a hit</span>
    <span class="c1">##grab the first hit</span>
    x <span class="o">&lt;-</span> x<span class="p">[</span><span class="m">2</span><span class="p">]</span>
    x <span class="o">&lt;-</span> strsplit<span class="p">(</span>x<span class="p">,</span> split<span class="o">=</span><span class="s">&quot;&amp;amp;&quot;</span><span class="p">)[[</span><span class="m">1</span><span class="p">]][</span><span class="m">1</span><span class="p">]</span>
    theurl <span class="o">&lt;-</span> paste<span class="p">(</span><span class="s">&quot;http://scholar.google.com/citations?hl=en&amp;user=&quot;</span><span class="p">,</span> x<span class="p">,</span> sep<span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
    print<span class="p">(</span>theurl<span class="p">)</span>
    <span class="kr">return</span><span class="p">(</span>googleCite<span class="p">(</span>theurl<span class="p">,</span> <span class="kc">...</span><span class="p">))</span>
  <span class="p">}</span> <span class="kr">else</span> stop<span class="p">(</span><span class="s">&quot;No Author found&quot;</span><span class="p">)</span>
  close<span class="p">(</span>thepage<span class="p">)</span>
<span class="p">}</span>
 
gcSummary <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>alldata<span class="p">){</span>
  citations <span class="o">=</span> as.numeric<span class="p">(</span>alldata<span class="o">$</span>Citations<span class="p">)</span>
  citations<span class="p">[</span>is.na<span class="p">(</span>citations<span class="p">)]</span> <span class="o">=</span> <span class="m">0</span>
  nauthors <span class="o">=</span> as.numeric<span class="p">(</span>alldata<span class="o">$</span><span class="s">&quot;N Authors&quot;</span><span class="p">)</span>
  n <span class="o">=</span> dim<span class="p">(</span>alldata<span class="p">)[</span><span class="m">1</span><span class="p">]</span>
  nF <span class="o">=</span> sum<span class="p">(</span>alldata<span class="o">$</span>Is_First<span class="p">)</span>
  nL <span class="o">=</span> sum<span class="p">(</span>alldata<span class="o">$</span>Is_Last<span class="p">)</span>
  nFL <span class="o">=</span> sum<span class="p">(</span>alldata<span class="o">$</span>Is_Last <span class="o">|</span> alldata<span class="o">$</span>Is_First<span class="p">)</span>
  nFS <span class="o">=</span> sum<span class="p">(</span>alldata<span class="o">$</span>Is_First <span class="o">|</span> alldata<span class="o">$</span>Is_Second<span class="p">)</span>
  
  totalPapers <span class="o">=</span> dim<span class="p">(</span>alldata<span class="p">)[</span><span class="m">1</span><span class="p">]</span>
  totalCites <span class="o">=</span> sum<span class="p">(</span>citations<span class="p">,</span>na.rm<span class="o">=</span><span class="k-Variable">T</span><span class="p">)</span>
  medianCites <span class="o">=</span> median<span class="p">(</span>citations<span class="p">,</span>na.rm<span class="o">=</span><span class="k-Variable">T</span><span class="p">)</span>
  medianAuthorCites <span class="o">=</span> median<span class="p">(</span>citations<span class="o">/</span>nauthors<span class="p">,</span>na.rm<span class="o">=</span><span class="k-Variable">T</span><span class="p">)</span>
  
  hindex <span class="o">=</span> sum<span class="p">(</span>citations <span class="o">&gt;</span> <span class="m">1</span><span class="o">:</span>n<span class="p">,</span>na.rm<span class="o">=</span><span class="k-Variable">T</span><span class="p">)</span>
  hindexF <span class="o">=</span> sum<span class="p">(</span>citations<span class="p">[</span>alldata<span class="o">$</span>Is_First<span class="p">]</span><span class="o">&gt;</span> <span class="m">1</span><span class="o">:</span>nF<span class="p">,</span>na.rm<span class="o">=</span><span class="k-Variable">T</span><span class="p">)</span>
  hindexL <span class="o">=</span> sum<span class="p">(</span>citations<span class="p">[</span>alldata<span class="o">$</span>Is_Last<span class="p">]</span> <span class="o">&gt;</span> <span class="m">1</span><span class="o">:</span>nL<span class="p">,</span>na.rm<span class="o">=</span><span class="k-Variable">T</span><span class="p">)</span>
  hindexFL <span class="o">=</span> sum<span class="p">(</span>citations<span class="p">[</span>alldata<span class="o">$</span>Is_Last <span class="o">|</span> alldata<span class="o">$</span>Is_First<span class="p">]</span> <span class="o">&gt;</span> <span class="m">1</span><span class="o">:</span>nFL<span class="p">,</span>na.rm<span class="o">=</span><span class="k-Variable">T</span><span class="p">)</span>
  hindexFS <span class="o">=</span> sum<span class="p">(</span>citations<span class="p">[</span>alldata<span class="o">$</span>Is_First <span class="o">|</span> alldata<span class="o">$</span>Is_Second<span class="p">]</span> <span class="o">&gt;</span> <span class="m">1</span><span class="o">:</span>nFL<span class="p">,</span>na.rm<span class="o">=</span><span class="k-Variable">T</span><span class="p">)</span>
  
  tmp <span class="o">=</span> cumsum<span class="p">(</span>citations<span class="p">)</span>
  
  gindex <span class="o">=</span> sum<span class="p">(</span>tmp <span class="o">&gt;=</span> <span class="p">(</span><span class="m">1</span><span class="o">:</span>n<span class="p">)</span><span class="o">^</span><span class="m">2</span><span class="p">)</span>
  
  nyears <span class="o">=</span>  as.numeric<span class="p">(</span>format<span class="p">(</span>Sys.time<span class="p">(),</span> <span class="s">&quot;%Y&quot;</span><span class="p">))</span> <span class="o">-</span> min<span class="p">(</span>as.numeric<span class="p">(</span>out<span class="o">$</span>Year<span class="p">),</span>na.rm<span class="o">=</span><span class="k-Variable">T</span><span class="p">)</span>
  mindex <span class="o">=</span> hindex<span class="o">/</span>nyears
  
  cat<span class="p">(</span><span class="s">&quot;Total papers = &quot;</span><span class="p">)</span>
  cat<span class="p">(</span>totalPapers<span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;Median citations per paper = &quot;</span><span class="p">)</span>
  cat<span class="p">(</span>medianCites<span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;Median (citations / # of authors) per paper = &quot;</span><span class="p">)</span>
  cat<span class="p">(</span>medianAuthorCites<span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;H-index = &quot;</span><span class="p">)</span>
  cat<span class="p">(</span>hindex<span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;G-index = &quot;</span><span class="p">)</span>
  cat<span class="p">(</span>gindex<span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;M-index = &quot;</span><span class="p">)</span>
  cat<span class="p">(</span>mindex<span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;First author H-index = &quot;</span><span class="p">)</span>
  cat<span class="p">(</span>hindexF<span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;Last author H-index = &quot;</span><span class="p">)</span>
  cat<span class="p">(</span>hindexL<span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;First or last author H-index = &quot;</span><span class="p">)</span>
  cat<span class="p">(</span>hindexFL<span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;First or second author H-index = &quot;</span><span class="p">)</span>
  cat<span class="p">(</span>hindexFS<span class="p">)</span>
  cat<span class="p">(</span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
  
<span class="p">}</span>
out <span class="o">=</span> googleCite<span class="p">(</span><span class="s">&#39;http://scholar.google.com/citations?user=-S7V41QAAAAJ&amp;hl=en&#39;</span><span class="p">,</span>pdfname<span class="o">=</span><span class="s">&#39;James_black.pdf&#39;</span><span class="p">)</span> 
</code></pre></div>


				<div class="entry-related">
					<h2>Related Articles <a href="#" onclick="(function(btn){var z=document.createElement('script');document.subtomeBtn=btn;z.src='https://www.subtome.com/load.js';document.body.appendChild(z);})(this);_gaq.push(['_trackEvent', 'Link', 'Subscribe']);" data-subtome-resource="http://www.epijim.co.uk" data-subtome-feeds="http://feeds.feedburner.com/epijim"><i class="fa fa-rss fa-fw"></i></a></h2>
					<ul>
						
						<li><a href="http://www.epijim.co.uk/articles/regression/">Linear regression with R</a></li>
						
						<li><a href="http://www.epijim.co.uk/articles/wine-budget/">Wine spend and academic performance</a></li>
						
						<li><a href="http://www.epijim.co.uk/articles/sankey-arrow-plot/">Visualising flow with a sankey plot</a></li>
						
						<li><a href="http://www.epijim.co.uk/articles/facebook-network/">Plotting my Facebook data</a></li>
						
					</ul>
				</div><!-- /.entry-related -->
				<hr />
				<div class="entry-meta">
					<meta itemprop="keywords" content="R, Google Scholar">
					<span class="entry-tags"><a href="http://www.epijim.co.uk/tag/r/" title="R" class="tag" rel="tag">R</a><a href="http://www.epijim.co.uk/tag/google-scholar/" title="Google Scholar" class="tag" rel="tag">Google Scholar</a></span>
					<span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person">Published by <span itemprop="name" class="fn"><a href="http://www.epijim.co.uk/about/" title="About James Black" itemprop="url">James Black</a></span> on </span>
					<span class="entry-date"><time datetime="2013-02-15T00:00:00+00:00" itemprop="datePublished" class="published updated">February 15, 2013</time></span>
				</div><!-- /.entry-meta -->
			</div><!-- /.entry-content -->
			
			<div id="disqus_thread" class="entry-content"></div><!-- /#disqus_thread -->
			<noscript><div class="upgrade">Please enable JavaScript to view comments.</div><!-- /.upgrade --></noscript>
			
		</div><!-- /.entry-wrapper -->
	</article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <p>&#169; 2004&#8211;2014 <a href="http://www.epijim.co.uk/about/">James Black</a>, this site is written in markdown, compiled to html by jekyll, and hosted on github.pages.io. <a href="http://www.epijim.co.uk/humans.txt">Base theme here</a>.</p>
		<div class="social-icons">
			
			
			<a href="http://github.com/epijim" title="James Black on Github" target="_blank"><i class="fa fa-github fa-fw fa-2x"></i></a>
			
			<a href="https://plus.google.com/112022213613617220776/" title="James Black on Google+" target="_blank"><i class="fa fa-google-plus-square fa-fw fa-2x"></i></a>
			
			
		</div><!-- /.social-icons -->
  </footer>
</div><!-- /.footer-wrapper -->

<!-- jQuery -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" data-cfasync="false"></script>
<script data-cfasync="false">window.jQuery || document.write('<script src="http://www.epijim.co.uk/js/vendor/jquery-397754ba49e9e0cf4e7c190da78dda05.js"><\/script>')</script>
<script src="http://www.epijim.co.uk/js/main.min-b1c052388578ab3b44858ccabf1f47d6.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
	var _gaq = _gaq || [];
	var pluginUrl = 
	'//www.google-analytics.com/plugins/ga/inpage_linkid.js';
	_gaq.push(['_require', 'inpage_linkid', pluginUrl]);
	_gaq.push(['_setAccount', '']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>

<!-- Modernizr -->
<script src="http://www.epijim.co.uk/js/vendor/modernizr-ab083e250330742e0b9d2a5548ea8745.js"></script>


<!-- Disqus Comments -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jamesblack'; // Required - Replace example with your forum shortname
    var disqus_title = 'My google scholar profile';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>


</body>
</html>
