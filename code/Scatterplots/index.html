<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Scatter plots with R • James Black</title>
    <meta name="description" content="Making useful scatter plots with R.">
    <meta name="keywords" content="r, scatter plot">
    
    
    	<!-- Twitter Cards -->
	<meta name="twitter:title" content="Scatter plots with R">
	<meta name="twitter:description" content="Making useful scatter plots with R.">
	
	
	
	<meta name="twitter:card" content="summary">
	<meta name="twitter:image" content="http://epijim.uk/images/120x120.gif">
	
	<!-- Open Graph -->
	<meta property="og:locale" content="en_US">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Scatter plots with R">
	<meta property="og:description" content="Making useful scatter plots with R.">
	<meta property="og:url" content="http://epijim.uk/code/Scatterplots/">
	<meta property="og:site_name" content="James Black">
    <link rel="author" href="https://plus.google.com/https://plus.google.com/112022213613617220776/"/>

    <link rel="canonical" href="http://epijim.uk/code/Scatterplots/">

    <link href="http://epijim.uk/atom.xml" type="application/atom+xml" rel="alternate" title="James Black Atom Feed">
    <link href="http://epijim.uk/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">

    <style>
    .sliding-menu-content {
      top: 0;
      right: 0;
      text-align: center;
      visibility: hidden;
      height: 100%;
      width: 100%;
      -webkit-transform: translateX(100%);
      -moz-transform: translateX(100%);
      -ms-transform: translateX(100%);
      -o-transform: translateX(100%);
      transform: translateX(100%);
    }
    </style>

    <link rel="stylesheet" href="http://epijim.uk/css/main.css">
    <!-- HTML5 Shiv and Media Query Support for IE -->
    <!--[if lt IE 9]>
      <script src="http://epijim.uk/js/vendor/html5shiv.min.js"></script>
      <script src="http://epijim.uk/js/vendor/respond.min.js"></script>
    <![endif]-->

  </head>

  <body>
    <header id="masthead">
<link rel="alternate" type="application/rss+xml" title="James Black" href="http://epijim.uk/atom.xml">
  <div class="inner-wrap">
    <a href="http://epijim.uk" class="site-title">James Black</a>
    <nav role="navigation" class="menu top-menu">
        <ul class="menu-item">
	<li class="home"><a href="/">James Black</a></li>
	
    
        
    
    <li><a href="http://epijim.uk/about/" >About</a></li>
  
    
        
    
    <li><a href="http://epijim.uk/my-papers/" >Papers</a></li>
  
    
        
    
    <li><a href="http://epijim.uk/code/" >Code</a></li>
  
    
        
    
    <li><a href="http://epijim.uk/blog/" >Blog</a></li>
  
    
        
    
    <li><a href="http://epijim.uk/courses/" >Courses</a></li>
  
</ul>
    </nav>
  </div><!-- /.inner-wrap -->
</header><!-- /.masthead -->

    <nav role="navigation" class="js-menu sliding-menu-content">
	<ul class="menu-item">
		<li>
      
        
      
			<a href="http://epijim.uk/about/"><img src="http://epijim.uk/images/about_thumb.jpeg" alt="teaser" class="teaser"></a>
			<a href="http://epijim.uk/about/" class="title">About</a>
			<p class="excerpt">Get more information on, or contact, James Black.</p>
		</li><li>
      
        
      
			<a href="http://epijim.uk/my-papers/"><img src="http://epijim.uk/images/papers_thumb.png" alt="teaser" class="teaser"></a>
			<a href="http://epijim.uk/my-papers/" class="title">Papers</a>
			<p class="excerpt">My published journal articles.</p>
		</li><li>
      
        
      
			<a href="http://epijim.uk/code/"><img src="http://epijim.uk/images/code_thumb.png" alt="teaser" class="teaser"></a>
			<a href="http://epijim.uk/code/" class="title">Code</a>
			<p class="excerpt">A collection of code snippets I think are really useful.</p>
		</li><li>
      
        
      
			<a href="http://epijim.uk/blog/"><img src="http://epijim.uk/images/blog_thumb.jpg" alt="teaser" class="teaser"></a>
			<a href="http://epijim.uk/blog/" class="title">Blog</a>
			<p class="excerpt">My data based blog.</p>
		</li><li>
      
        
      
			<a href="http://epijim.uk/courses/"><img src="http://epijim.uk/images/courses.jpg" alt="teaser" class="teaser"></a>
			<a href="http://epijim.uk/courses/" class="title">Courses</a>
			<p class="excerpt">Courses I've done relating to R or coding</p>
		</li>
	</ul>
</nav>
<button type="button" class="js-menu-trigger sliding-menu-button menulines-button x2" role="button" aria-label="Toggle Navigation">
	<span class="menulines"></span>
</button>

<div class="js-menu-screen menu-screen"></div>

    <div id="page-wrapper">
      <!--[if lt IE 9]><div class="upgrade notice-danger"><strong>Your browser is quite old!</strong> Why not <a href="http://whatbrowser.org/">upgrade to a newer one</a> to better enjoy this site?</div><![endif]-->

      <div id="main" role="main">			
	<article class="wrap" itemscope itemtype="http://schema.org/Article">
		
		<nav class="breadcrumbs">
  <a href="http://epijim.uk">Home</a> <span class="divider">/</span> <a href="http://epijim.uk/code/">Code</a> <span class="divider">/</span>
</nav><!-- /.breadcrumbs -->
		<div class="page-title">
			<h1>Scatter plots with R</h1>
		</div>
		<div class="inner-wrap">
			<nav class="toc"></nav><!-- /.toc -->
			<div id="content" class="page-content" itemprop="articleBody">
				<p>After the histogram, scatter plots are pretty much always the first plot I make when
 exploring a dataset. The code for the plots below mainly come from two sites. Which
 are both brilliant sources for info on using R.</p>

<ol>
  <li>R for public health<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup></li>
  <li>Quick R<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup></li>
</ol>

<p>I’ve only made small changes to fit my data, and to include themes, custom titles, etc.</p>

<h2 id="data-im-using">Data I’m using</h2>

<p>To make it easily to replicate I put the data I’m using in a gist.</p>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="language-r" data-lang="r"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</code></pre></div></td><td class="code"><div class="highlight"><pre>temporaryFile <span class="o">&lt;-</span> <span class="kp">tempfile</span><span class="p">()</span>
download.file<span class="p">(</span><span class="s">&quot;https://gist.githubusercontent.com/epijim/8819934/raw/6c76df80eb095065a9ce0fa4b8f94410ad528fed/college_data.csv&quot;</span>
              <span class="p">,</span>destfile<span class="o">=</span>temporaryFile<span class="p">,</span> method<span class="o">=</span><span class="s">&quot;curl&quot;</span><span class="p">)</span>
mydata <span class="o">&lt;-</span> read.csv<span class="p">(</span>temporaryFile<span class="p">)</span>

<span class="c1"># convert wine budget to thousands</span>
mydata<span class="o">$</span>Wine_budget <span class="o">&lt;-</span> mydata<span class="o">$</span>Wine_budget<span class="o">/</span><span class="m">1000</span>

<span class="kp">options</span><span class="p">(</span>scipen<span class="o">=</span><span class="m">999</span><span class="p">)</span> <span class="c1"># no scientific notation</span>

<span class="c1"># Just in case, I&#39;ll duplicate college as a string variable.</span>
mydata<span class="o">$</span>College_char <span class="o">&lt;-</span> <span class="kp">as.character</span><span class="p">(</span>mydata<span class="o">$</span>College<span class="p">)</span>
</pre></div>
</td></tr></table>

<h2 id="scatter-plot-with-rug">Scatter plot with rug</h2>

<p>A scatter plot with a rug plot on each axis.</p>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="language-r" data-lang="r">1
2
3
4
5
6
7
8
9</code></pre></div></td><td class="code"><div class="highlight"><pre>png<span class="p">(</span><span class="s">&quot;scatterplot_1_rug.png&quot;</span><span class="p">,</span>width<span class="o">=</span><span class="m">800</span><span class="p">)</span>
  ggplot<span class="p">(</span>mydata<span class="p">,</span>aes<span class="p">(</span>Founded<span class="p">,</span>Wine_budget<span class="p">))</span><span class="o">+</span>
    geom_point<span class="p">()</span><span class="o">+</span>
    geom_rug<span class="p">(</span>col<span class="o">=</span><span class="s">&quot;darkred&quot;</span><span class="p">,</span>alpha<span class="o">=</span><span class="m">0.4</span><span class="p">)</span><span class="o">+</span>
  theme_bw<span class="p">()</span><span class="o">+</span>
  xlab<span class="p">(</span><span class="s">&quot;Year college was founded&quot;</span><span class="p">)</span><span class="o">+</span>
  ylab<span class="p">(</span><span class="s">&quot;Wine budget in thousands&quot;</span><span class="p">)</span><span class="o">+</span>
  ggtitle<span class="p">(</span><span class="s">&quot;Scatter of year Cambridge college founded and wine budget&quot;</span><span class="p">)</span>
dev.off<span class="p">()</span>
</pre></div>
</td></tr></table>

<figure>
	<a href="/images/scatterplot_1_rug.png"><img src="/images/scatterplot_1_rug.png" /></a>
</figure>

<h2 id="scatter-plot-with-histograms">Scatter plot with histograms</h2>

<p>Scatter plot with histograms on each axis.</p>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="language-r" data-lang="r"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>gridExtra<span class="p">)</span>
<span class="c1">#placeholder plot - prints nothing at all</span>
empty <span class="o">&lt;-</span> ggplot<span class="p">()</span><span class="o">+</span>geom_point<span class="p">(</span>aes<span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">),</span> colour<span class="o">=</span><span class="s">&quot;white&quot;</span><span class="p">)</span> <span class="o">+</span>
  theme<span class="p">(</span>
    plot.background <span class="o">=</span> element_blank<span class="p">(),</span>
    panel.grid.major <span class="o">=</span> element_blank<span class="p">(),</span>
    panel.grid.minor <span class="o">=</span> element_blank<span class="p">(),</span>
    panel.border <span class="o">=</span> element_blank<span class="p">(),</span>
    panel.background <span class="o">=</span> element_blank<span class="p">(),</span>
    axis.title.x <span class="o">=</span> element_blank<span class="p">(),</span>
    axis.title.y <span class="o">=</span> element_blank<span class="p">(),</span>
    axis.text.x <span class="o">=</span> element_blank<span class="p">(),</span>
    axis.text.y <span class="o">=</span> element_blank<span class="p">(),</span>
    axis.ticks <span class="o">=</span> element_blank<span class="p">()</span>
  <span class="p">)</span>

<span class="c1">#scatterplot of x and y variables</span>
scatter <span class="o">&lt;-</span> ggplot<span class="p">(</span>mydata<span class="p">,</span>aes<span class="p">(</span>Founded<span class="p">,</span> Wine_budget<span class="p">))</span><span class="o">+</span>
  geom_point<span class="p">(</span>aes<span class="p">(</span>color<span class="o">=</span>Rating<span class="p">))</span><span class="o">+</span>
  scale_color_manual<span class="p">(</span>values <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;purple&quot;</span><span class="p">,</span><span class="s">&quot;blue&quot;</span><span class="p">))</span><span class="o">+</span>
  theme_bw<span class="p">()</span><span class="o">+</span>
  theme<span class="p">(</span>legend.position<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">),</span>legend.justification<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">))</span><span class="o">+</span>
  xlab<span class="p">(</span><span class="s">&quot;Year college was founded&quot;</span><span class="p">)</span><span class="o">+</span>
  ylab<span class="p">(</span><span class="s">&quot;Wine budget in thousands of £&quot;</span><span class="p">)</span>

<span class="c1">#marginal density of x - plot on top</span>
plot_top <span class="o">&lt;-</span> ggplot<span class="p">(</span>mydata<span class="p">,</span> aes<span class="p">(</span>Founded<span class="p">,</span> fill<span class="o">=</span>Rating<span class="p">))</span> <span class="o">+</span>
  geom_density<span class="p">(</span>alpha<span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
  scale_fill_manual<span class="p">(</span>values <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;purple&quot;</span><span class="p">,</span><span class="s">&quot;blue&quot;</span><span class="p">))</span> <span class="o">+</span>
  theme_bw<span class="p">()</span><span class="o">+</span>
  theme<span class="p">(</span>legend.position <span class="o">=</span> <span class="s">&quot;none&quot;</span><span class="p">,</span>axis.title.x <span class="o">=</span> element_blank<span class="p">())</span> <span class="c1"># removes density x</span>

<span class="c1">#marginal density of y - plot on the right</span>
plot_right <span class="o">&lt;-</span> ggplot<span class="p">(</span>mydata<span class="p">,</span> aes<span class="p">(</span>Wine_budget<span class="p">,</span> fill<span class="o">=</span>Rating<span class="p">))</span> <span class="o">+</span>
  geom_density<span class="p">(</span>alpha<span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
  coord_flip<span class="p">()</span> <span class="o">+</span>
  scale_fill_manual<span class="p">(</span>values <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;purple&quot;</span><span class="p">,</span><span class="s">&quot;blue&quot;</span><span class="p">))</span> <span class="o">+</span>
  theme_bw<span class="p">()</span><span class="o">+</span>
  theme<span class="p">(</span>legend.position <span class="o">=</span> <span class="s">&quot;none&quot;</span><span class="p">,</span>axis.title.y <span class="o">=</span> element_blank<span class="p">())</span> <span class="c1"># removes density y</span>

<span class="c1">#arrange the plots together, with appropriate height and width for each row and column</span>
png<span class="p">(</span><span class="s">&quot;scatterplot_2_hist.png&quot;</span><span class="p">,</span>width<span class="o">=</span><span class="m">800</span><span class="p">)</span>
grid.arrange<span class="p">(</span>plot_top<span class="p">,</span> empty<span class="p">,</span> scatter<span class="p">,</span> plot_right<span class="p">,</span>
             ncol<span class="o">=</span><span class="m">2</span><span class="p">,</span> nrow<span class="o">=</span><span class="m">2</span><span class="p">,</span> widths<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> heights<span class="o">=</span><span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">4</span><span class="p">),</span>
             main<span class="o">=</span><span class="s">&quot;Scatter of year Cambridge college founded and wine budget \nby A/B/C Board of Graduate Studies college grading&quot;</span><span class="p">)</span>
dev.off<span class="p">()</span>
</pre></div>
</td></tr></table>

<figure>
	<a href="/images/scatterplot_2_hist.png"><img src="/images/scatterplot_2_hist.png" /></a>
</figure>

<h2 id="dealing-with-large-datasets">Dealing with large datasets</h2>

<p>When you have lots of points, it becomes hard to see the outliers in a scatter plot. A
 super simple solution is just to make the points a bit transparent. Although that can hide
 the outliers.</p>

<p>In the plot below there are more than 16,000,000 data points. As it’s financial data, on
 the price paid for bitcoins, it’s all very closely clustered in one spot. This makes it
 hard to see the outliers, where trades occurred that were well below or above the market
 value of a bitcoin. The hexbin plot allows you to see this data.</p>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="language-r" data-lang="r">1
2
3
4
5
6
7
8
9</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">library</span><span class="p">(</span>hexbin<span class="p">)</span>
png<span class="p">(</span><span class="s">&quot;scatter_2_hexbin.png&quot;</span><span class="p">,</span> width<span class="o">=</span><span class="m">800</span><span class="p">)</span>
  bin<span class="o">&lt;-</span>hexbin<span class="p">(</span>bitcoin<span class="o">$</span>When<span class="p">,</span> bitcoin<span class="o">$</span>priceperbitcoin_log<span class="p">,</span> xbins<span class="o">=</span><span class="m">50</span><span class="p">)</span>
  plot<span class="p">(</span>bin<span class="p">,</span>
       main<span class="o">=</span><span class="s">&quot;Price per bitcoin over time in 16,748,682 Mt.Gox transactions&quot;</span><span class="p">,</span>
       xlab<span class="o">=</span><span class="s">&quot;Days since Jan 1st 1970&quot;</span><span class="p">,</span>
       ylab<span class="o">=</span><span class="s">&quot;Log10 of price per bitcoin&quot;</span>
       <span class="p">)</span>
dev.off<span class="p">()</span>
</pre></div>
</td></tr></table>

<figure>
	<a href="/images/scatter_2_hexbin.png"><img src="/images/scatter_2_hexbin.png" /></a>
	<figcaption>Hexbin plot.</figcaption>
</figure>

<h2 id="scatter-heat-maps">Scatter heat maps</h2>

<p>The next plot colours points based on how close other points are to it. This code came out of a
 Stack Overflow question.<sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup></p>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="language-r" data-lang="r"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">## Use densCols() output to get density at each point</span>
density <span class="o">&lt;-</span> densCols<span class="p">(</span>mydata_naomit<span class="o">$</span>Undergrad_applications<span class="p">,</span>
                    mydata_naomit<span class="o">$</span>Undergrad_acceptances<span class="p">,</span>
                    colramp<span class="o">=</span>colorRampPalette<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;black&quot;</span><span class="p">,</span> <span class="s">&quot;white&quot;</span><span class="p">)))</span>
mydata_naomit<span class="o">$</span>density <span class="o">&lt;-</span> col2rgb<span class="p">(</span>density<span class="p">)[</span><span class="m">1</span><span class="p">,]</span> <span class="o">+</span> <span class="m">1L</span>

<span class="c1">## Map densities to colors</span>
colours <span class="o">&lt;-</span>  colorRampPalette<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;#000099&quot;</span><span class="p">,</span> <span class="s">&quot;#00FEFF&quot;</span><span class="p">,</span> <span class="s">&quot;#45FE4F&quot;</span><span class="p">,</span>
                            <span class="s">&quot;#FCFF00&quot;</span><span class="p">,</span> <span class="s">&quot;#FF9400&quot;</span><span class="p">,</span> <span class="s">&quot;#FF3100&quot;</span><span class="p">))(</span><span class="m">256</span><span class="p">)</span>
mydata_naomit<span class="o">$</span>colours <span class="o">&lt;-</span> colours<span class="p">[</span>mydata_naomit<span class="o">$</span>density<span class="p">]</span>

<span class="c1">## Plot it, reordering rows so that densest points are plotted on top</span>
png<span class="p">(</span><span class="s">&quot;scatter_3_heatmap.png&quot;</span><span class="p">)</span>
plot<span class="p">(</span>Undergrad_acceptances<span class="o">~</span>Undergrad_applications<span class="p">,</span>
     data<span class="o">=</span>mydata_naomit<span class="p">[</span><span class="kp">order</span><span class="p">(</span>mydata_naomit<span class="o">$</span>density<span class="p">),],</span>
     pch<span class="o">=</span><span class="m">20</span><span class="p">,</span> col<span class="o">=</span>colours<span class="p">,</span> cex<span class="o">=</span><span class="m">2</span><span class="p">,</span>
     xlab<span class="o">=</span><span class="s">&quot;Undergraduate applications&quot;</span><span class="p">,</span>
     ylab<span class="o">=</span><span class="s">&quot;Undergraduate acceptances&quot;</span><span class="p">)</span>
dev.off<span class="p">()</span>
</pre></div>
</td></tr></table>

<figure>
	<a href="/images/scatter_3_heatmap.png"><img src="/images/scatter_3_heatmap.png" /></a>
	<figcaption>Scatter heat maps.</figcaption>
</figure>

<h2 id="scatter-contour-plots">Scatter contour plots</h2>

<p>And a scatter plot with a coloured contour line around the points.</p>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="language-r" data-lang="r">1
2
3
4
5
6
7</code></pre></div></td><td class="code"><div class="highlight"><pre>png<span class="p">(</span><span class="s">&quot;scatter_3_contour.png&quot;</span><span class="p">,</span> width<span class="o">=</span><span class="m">800</span><span class="p">)</span>
plot<span class="p">(</span>mydata_naomit<span class="p">,</span>
     xlab<span class="o">=</span><span class="s">&quot;Undergraduate applications&quot;</span><span class="p">,</span>
     ylab<span class="o">=</span><span class="s">&quot;Undergraduate acceptances&quot;</span><span class="p">,</span>
     pch<span class="o">=</span><span class="m">1</span><span class="p">,</span> cex<span class="o">=</span><span class="m">.4</span><span class="p">)</span>
contour<span class="p">(</span>z<span class="p">,</span> drawlabels<span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span> nlevels<span class="o">=</span><span class="kp">levels</span><span class="p">,</span> col<span class="o">=</span>colours<span class="p">,</span> add<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
dev.off<span class="p">()</span>
</pre></div>
</td></tr></table>

<figure>
	<a href="/images/scatter_3_contour.png"><img src="/images/scatter_3_contour.png" /></a>
	<figcaption>Contour scatter plot.</figcaption>
</figure>

<h2 id="interactive-scatter-plots">Interactive scatter plots</h2>

<p>The rCharts package allows you to make awesome, interactive charts. There are are a number
 of libraries available, and each does things slightly differently. None of it seems well
 documented, and it’s often confusing if you try and relate the documentation from the
 original libraries back to the rCharts plots. I found it easier to either edit the charts
 once they are in html, or to use <em>str()</em> on a plot environment to get a rough idea of
 what’s editable.</p>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="language-r" data-lang="r"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">#require(devtools)</span>
<span class="c1">#install_github(&#39;rCharts&#39;, &#39;ramnathv&#39;)</span>

<span class="kn">require</span><span class="p">(</span>rCharts<span class="p">)</span>

selectedfactor <span class="o">=</span> mydata<span class="o">$</span>College

rchart <span class="o">&lt;-</span> rPlot<span class="p">(</span>Firsts_2013 <span class="o">~</span> Wine_budget <span class="p">,</span>
            data <span class="o">=</span> mydata<span class="p">,</span>
            type <span class="o">=</span> <span class="s">&quot;point&quot;</span><span class="p">,</span>
            width <span class="o">=</span> <span class="m">500</span><span class="p">,</span>
            color <span class="o">=</span> <span class="s">&quot;College_char&quot;</span><span class="p">)</span>
rchart<span class="o">$</span>guides<span class="p">(</span>y <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>min <span class="o">=</span> <span class="m">0</span><span class="p">,</span> max <span class="o">=</span> <span class="m">40</span><span class="p">))</span>
rchart<span class="o">$</span>guides<span class="p">(</span>x <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>min <span class="o">=</span> <span class="m">0</span><span class="p">,</span> max <span class="o">=</span> <span class="m">400000</span><span class="p">))</span>
rchart<span class="o">$</span>guides<span class="p">(</span>
  color <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>
    numticks <span class="o">=</span> <span class="kp">length</span><span class="p">(</span> <span class="kp">levels</span><span class="p">(</span> selectedfactor <span class="p">)</span> <span class="p">),</span>
    labels <span class="o">=</span> <span class="kp">as.character</span><span class="p">(</span> <span class="kp">levels</span><span class="p">(</span> selectedfactor <span class="p">)</span> <span class="p">)</span>
  <span class="p">),</span>
  y<span class="o">=</span><span class="kt">list</span><span class="p">(</span>title<span class="o">=</span><span class="s">&quot;% with firsts&quot;</span><span class="p">),</span>
  x<span class="o">=</span><span class="kt">list</span><span class="p">(</span>title<span class="o">=</span><span class="s">&quot;Yearly wine budget in thousands (£)&quot;</span><span class="p">))</span>
rchart<span class="o">$</span>set<span class="p">(</span>width <span class="o">=</span> <span class="m">550</span><span class="p">)</span>
rchart<span class="o">$</span>set<span class="p">(</span>height <span class="o">=</span> <span class="m">460</span><span class="p">)</span>

rchart<span class="o">$</span><span class="kp">save</span><span class="p">(</span><span class="s">&#39;index.html&#39;</span><span class="p">,</span> cdn<span class="o">=</span><span class="bp">F</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Most of above is pretty self explanatory - except maybe <em>cdn</em>. If you know you’ll have
 internet access, set it as true. If you have no internet, or don’t want to rely on the rCharts site,
 set it as false and put the javascript that runs the plot on your computer/server.</p>

<html>
  <head>

    <script src="/jamesscripts/polychart2.standalone.js" type="text/javascript"></script>

    <style>
    .rChart {
      display: block;
      margin-left: auto;
      margin-right: auto;
      width: 550px;
      height: 460px;
    }  
    </style>

  </head>
  <body>
    <div id="charteba1c84cbc4" class="rChart polycharts"></div>  

    <script type="text/javascript">
    var chartParams = {
 "dom": "charteba1c84cbc4",
"width":    550,
"height":    460,
"layers": [
 {
 "x": "Wine_budget",
"y": "Firsts_2013",
"data": {
 "College": [ "Christ's", "Churchill", "Clare", "Clare Hall", "Corpus Christi", "Darwin", "Downing", "Emma", "Fitzwilliam", "Girton", "Caius", "Homerton", "Hughes Hall", "Jesus", "King's", "Lucy Cavendish", "Magdalene", "Murray Edwards", "Newnham", "Pembroke", "Peterhouse", "Queens", "Robinson", "Selwyn", "Sidney", "St Catharine's", "St Edmund's", "St John's", "Trinity", "Trinity Hall", "Wolfson" ],
"Grad_coll": [ false, false, false, true, false, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false ],
"Wine_budget": [ 71055, 87685, 79989, 17400, 79254, 17510, 77798, 131127, 23028, 30051, 96994, 27975, 14034, 212256, 338559, null, 68192, 32917, 27263, 141692, 82133, 111113, 44722, 49498, 97507, 62432, 19304, 260064, 223292, 127186, 39647 ],
"Fellows": [ 84, 165, 120, 67, 54, 68, 65, 87, 56, 118, 114, 90, 53, 85, 132, 40, 83, 58, 70, 102, 41, 84, 82, 58, 67, 60, 98, 149, 185, 75, 271 ],
"Students": [ 617, 770, 816, 181, 483, 633, 696, 650, 780, 722, 775, 1324, 600, 800, 685, 370, 526, 548, 644, 704, 441, 1007, 558, 577, 597, 650, 565, 897, 1060, 638, 711 ],
"Grads": [ 208, 290, 312, 181, 223, 633, 271, 220, 288, 220, 253, 695, 500, 335, 282, 226, 206, 188, 264, 260, 162, 496, 172, 200, 249, 220, 443, 354, 364, 258, 576 ],
"PhD": [ 127, 190, 190, 96, 145, 421, 151, 121, 151, 102, 161, 144, 200, 200, 202, 77, 105, 109, 127, 168, 117, 272, 51, 124, 135, 123, 65, 265, 288, 185, 342 ],
"Other": [ 81, 100, 122, 85, 78, 212, 120, 99, 137, 118, 92, 551, 300, 132, 80, 149, 101, 79, 137, 92, 45, 224, 121, 76, 104, 97, 378, 89, 76, 78, 234 ],
"Rating": [ "B", "B", "A", "B", "B", "C", "B", "A", "C", "B", "B", "A", "C", "A", "A", "C", "B", "C", "C", "B", "B", "B", "C", "B", "B", "B", "C", "A", "A", "A", "C" ],
"Part_time": [ "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "No", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "No", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "No", "Yes", "Yes", "Yes" ],
"Undergrad_applications": [ 451, 350, 573, null, 200, null, 548, 503, 260, 261, 393, 196, 32, 554, 417, 39, 237, 120, 167, 505, 155, 412, 222, 333, 306, 378, 25, 383, 383, 288, 29 ],
"Undergrad_acceptances": [ 99, 89, 134, null, 68, null, 97, 126, 95, 119, 134, 119, 7, 127, 88, 9, 77, 77, 79, 98, 56, 106, 97, 100, 86, 103, 4, 117, 128, 90, 13 ],
"Undergrad_acceptRate": [ 22, 25, 23, null, 34, null, 18, 25, 37, 46, 34, 61, 22, 23, 21, 23, 32, 64, 47, 19, 36, 26, 44, 30, 28, 27, 16, 31, 33, 31, 45 ],
"Founded": [ 1505, 1960, 1326, 1965, 1352, 1964, 1800, 1584, 1966, 1869, 1348, 1976, 1885, 1496, 1441, 1965, 1428, 1954, 1871, 1347, 1284, 1448, 1977, 1882, 1596, 1473, 1896, 1511, 1546, 1350, 1965 ],
"Percent_male": [ 58, 71, 52, 47, 60, 54, 66, 51, 63, 53, 60, 37, 61, 57, 57, 0, 54, 0, 0, 53, 57, 57, 60, 70, 63, 52, 69, 59, 63, 54, 64 ],
"Percent_female": [ 42, 29, 48, 53, 40, 46, 34, 49, 37, 47, 40, 63, 39, 43, 43, 100, 46, 100, 100, 47, 43, 43, 40, 30, 37, 48, 31, 41, 37, 46, 36 ],
"Fixed_assets": [ 66602000, 105978346, 70707000, 10579203, 191233087, 33160032, 86798000, 152640692, 43509000, 64000000, 159332000, 123453808, 18483546, 242995403, 155618000, 24323000, 73763845, 52852893, 90287969, 103991180, 171887000, 57310511, 24863000, 69992285, 64952747, 68797000, 8381224, 653359000, 892529000, 208176916, 47307000 ],
"Tompkin_1997": [ 3, 15, 11, null, 23, null, 12, 7, 13, 22, 8, null, null, 20, 14, null, 17, 24, 18, 5, 19, 3, 21, 16, 4, 9, null, 10, 1, 6, null ],
"Tompkin_1998": [ 2, 13, 6, null, 18, null, 11, 5, 12, 21, 4, null, null, 16, 10, null, 22, 24, 20, 9, 23, 2, 19, 15, 17, 14, null, 8, 1, 7, null ],
"Tompkin_1999": [ 1, 20, 15, null, 8, null, 16, 5, 19, 21, 6, null, null, 11, 13, null, 23, 22, 24, 14, 17, 3, 9, 7, 4, 10, null, 12, 2, 18, null ],
"Tompkin_2000": [ 1, 15, 9, null, 10, null, 8, 3, 21, 18, 12, null, null, 13, 20, null, 22, 16, 24, 6, 14, 5, 19, 7, 23, 11, null, 4, 2, 17, null ],
"Tompkin_2001": [ 1, 9, 6, null, 20, null, 10, 2, 13, 17, 8, null, null, 11, 21, null, 22, 23, 24, 7, 19, 5, 14, 12, 16, 18, null, 4, 3, 15, null ],
"Tompkin_2002": [ 4, 10, 3, null, 18, null, 8, 2, 20, 16, 7, null, null, 9, 14, null, 15, 24, 22, 1, 23, 5, 21, 13, 19, 12, null, 11, 6, 17, null ],
"Tompkin_2003": [ 2, 9, 6, null, 7, null, 12, 1, 20, 17, 4, 25, 27, 10, 16, 26, 18, 24, 21, 3, 22, 5, 23, 14, 15, 11, 29, 13, 8, 19, 28 ],
"Tompkin_2004": [ 2, 19, 4, null, 10, null, 17, 1, 15, 25, 5, 24, 27, 9, 20, 26, 22, 23, 13, 6, 21, 8, 16, 11, 18, 7, 29, 14, 3, 12, 28 ],
"Tompkin_2005": [ 4, 18, 9, null, 16, null, 15, 5, 13, 24, 2, 26, 29, 7, 10, 27, 20, 25, 21, 6, 22, 8, 11, 19, 14, 1, 28, 12, 3, 17, 23 ],
"Tompkin_2006": [ 6, 13, 12, null, 8, null, 11, 1, 19, 22, 2, 25, 29, 10, 17, 26, 20, 24, 23, 4, 21, 14, 18, 7, 9, 3, 28, 15, 5, 16, 27 ],
"Tompkin_2007": [ 2, 15, 17, null, 8, null, 3, 1, 14, 21, 10, 26, 29, 9, 18, 24, 13, 23, 22, 7, 25, 11, 20, 4, 12, 5, 28, 19, 6, 16, 27 ],
"Tompkin_2008": [ 8, 6, 13, null, 9, null, 12, 2, 21, 22, 4, 25, 26, 7, 19, 28, 5, 23, 24, 10, 18, 16, 17, 1, 14, 11, 29, 20, 3, 15, 27 ],
"Tompkin_2009": [ 13, 7, 18, null, 10, null, 15, 2, 21, 20, 4, 25, 26, 11, 17, 29, 8, 23, 24, 6, 16, 12, 19, 3, 22, 5, 28, 14, 1, 9, 27 ],
"Tompkin_2010": [ 12, 3, 8, null, 13, null, 15, 1, 22, 21, 11, 26, 27, 16, 14, 29, 5, 23, 25, 10, 7, 17, 19, 6, 18, 9, 28, 20, 2, 4, 24 ],
"Tompkin_2011": [ 6, 10, 4, null, 12, null, 17, 2, 21, 23, 13, 26, 27, 8, 20, 29, 9, 22, 24, 5, 18, 14, 19, 7, 16, 11, 28, 15, 1, 3, 25 ],
"Tompkin_2012": [ 9, 5, 11, null, 3, null, 20, 2, 19, 22, 16, 27, 26, 7, 13, 29, 15, 24, 23, 4, 18, 12, 21, 6, 17, 10, 28, 14, 1, 8, 25 ],
"Tompkin_2013": [ 8, 5, 11, null, 16, null, 12, 4, 20, 21, 17, 26, 27, 6, 14, 28, 15, 24, 23, 2, 10, 7, 22, 18, 19, 9, 29, 13, 1, 3, 25 ],
"Tompkin_Mean09to13": [    4.9,   11.3,    9.6, null,   12.3, null,   12.6,    2.7,   17.8,   20.8,    7.8,   25.5,   27.3,   10.6,   15.9,   27.4,   15.9,     23,   22.1,    6.2,   18.4,    8.6,   18.1,    9.8,   15.1,    9.2,   28.4,   12.8,    2.9,   11.9,     26 ],
"TompkinsScore_2013": [  66.76,  68.17,  66.08, null,  64.94, null,  66.05,  68.72,  64.16,  62.92,  64.85,  60.33,  57.92,  67.47,  65.49,  57.43,     65,  60.74,  60.92,  70.85,  66.41,  66.89,  61.95,  64.59,  64.37,  66.51,  56.35,  65.84,  73.66,  68.94,  60.51 ],
"Firsts_2013": [   24.7,   28.3,   25.3, null,   23.9, null,     23,   30.5,   21.4,   18.5,   21.1,     16,   13.2,   27.1,   25.9,   13.4,   22.8,   13.9,   15.8,   33.7,   27.8,   26.3,   16.2,   21.6,   19.8,   26.9,   13.4,   25.1,   41.7,   28.1,   18.9 ],
"College_char": [ "Christ's", "Churchill", "Clare", "Clare Hall", "Corpus Christi", "Darwin", "Downing", "Emma", "Fitzwilliam", "Girton", "Caius", "Homerton", "Hughes Hall", "Jesus", "King's", "Lucy Cavendish", "Magdalene", "Murray Edwards", "Newnham", "Pembroke", "Peterhouse", "Queens", "Robinson", "Selwyn", "Sidney", "St Catharine's", "St Edmund's", "St John's", "Trinity", "Trinity Hall", "Wolfson" ]
},
"facet": null,
"type": "point",
"width":    500,
"color": "College_char"
}
],
"facet": [],
"guides": {
 "y": {
 "min":      0,
"max":     40,
"title": "% with firsts"
},
"x": {
 "min":      0,
"max":  4e+05,
"title": "Yearly wine budget in thousands (£)"
},
"color": {
 "numticks": 31,
"labels": [ "Caius", "Christ's", "Churchill", "Clare", "Clare Hall", "Corpus Christi", "Darwin", "Downing", "Emma", "Fitzwilliam", "Girton", "Homerton", "Hughes Hall", "Jesus", "King's", "Lucy Cavendish", "Magdalene", "Murray Edwards", "Newnham", "Pembroke", "Peterhouse", "Queens", "Robinson", "Selwyn", "Sidney", "St Catharine's", "St Edmund's", "St John's", "Trinity", "Trinity Hall", "Wolfson" ]
}
},
"coord": [],
"id": "charteba1c84cbc4"
}
    _.each(chartParams.layers, function(el){
        el.data = polyjs.data(el.data)
    })
    var graph_charteba1c84cbc4 = polyjs.chart(chartParams);
</script>

  </body>
</html>

<h2 id="d-scatter-plots">3D scatter plots</h2>

<p>A 3D scatter plot from <a href="/articles/ski-2014/">my post about mapping ski data</a>. The 3D scatter plot is super simple to make:
code <a href="/articles/3Dscatter/">is here</a>.</p>

<figure>
	<a href="/images/ski_scattergif.gif"><img src="/images/ski_scattergif.gif" /></a>
	<figcaption>3D scatter plot of a day skiing.</figcaption>
</figure>

<h2 id="scatter-plot-matrixs">Scatter plot matrix’s</h2>

<p>Code for these are on my page on the scatter plot matrix, <a href="/articles/Scatterplotmatrix/">here</a>.</p>

<figure class="half">
	<img src="/images/wine_1_scattermatrix.jpeg" />
	<img src="/images/wine_2_scattermatrix_corrgram.jpeg" />
	<figcaption>Two types of scatter plot matrix.</figcaption>
</figure>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Part of a the ggplot series on: <a href="http://rforpublichealth.blogspot.co.uk">http://rforpublichealth.blogspot.co.uk</a> <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>Quick R has a dedicated page on pretty much every simple type of plot: <a href="http://www.statmethods.net">http://www.statmethods.net</a> <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>The original question is here: <a href="http://stackoverflow.com/questions/7073315/how-do-i-create-a-continuous-density-heatmap-of-2d-scatter-data-in-r">http://stackoverflow.com/questions/7073315/how-do-i-create-a-continuous-density-heatmap-of-2d-scatter-data-in-r</a> <a href="#fnref:3" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

				<hr />
				<footer class="page-footer">
					


<div class="author-image">
	<img src="http://epijim.uk/images/bio-photo.jpg" alt="James Black">
</div><!-- ./author-image -->
<div class="author-content">
	<h3 class="author-name" >Written by <a href="http://epijim.uk" itemprop="author">James Black</a></h3>
	<p class="author-bio">Reading Epidemiology at Jesus College, University of Cambridge.</p>
</div><!-- ./author-content -->
					<div class="inline-btn">
	<a class="btn-social twitter" href="https://twitter.com/intent/tweet?text=Scatter%20plots%20with%20R&amp;url=http://epijim.uk/code/Scatterplots/&amp;via=" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i> Share on Twitter</a>
	<a class="btn-social facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://epijim.uk/code/Scatterplots/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i> Share on Facebook</a>
	<a class="btn-social google-plus"  href="https://plus.google.com/share?url=http://epijim.uk/code/Scatterplots/" target="_blank"><i class="fa fa-google-plus" aria-hidden="true"></i> Share on Google+</a>
</div><!-- /.share-this -->
					<div class="page-meta">
	<p>Updated <time datetime="2014-09-27T16:57:41Z" itemprop="dateModified">September 27, 2014</time>
</div><!-- /.page-meta -->
					<div class="page-meta">
  
    <span>Filed under: <a href="/tag/r/" title="r" rel="tag">r</a>, <a href="/tag/scatter-plot/" title="scatter plot" rel="tag">scatter plot</a></span>
  
</div><!-- /.page-meta -->
				</footer><!-- /.footer -->
				<aside>
					<hr />
<div id="disqus_thread"></div>
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'jamesblack';

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
				</aside>
			</div><!-- /.content -->
		</div><!-- /.inner-wrap -->
		<div class="ads"><style>
.responsive-ads { width: 300px; height: 200px; }
@media(min-width: 520px) { .responsive-ads { width: 468px; height: 60px; } }
@media(min-width: 768px) { .responsive-ads { width: 160px; height: 600px; } }
</style>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle responsive-ads"
	style="display:inline-block"
	data-ad-client="ca-pub-8433594162604860"
	data-ad-slot="9138304032"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div><!-- /.ads -->
	</article><!-- ./wrap -->
</div><!-- /#main -->

      <footer role="contentinfo" id="site-footer">
	<nav role="navigation" class="menu bottom-menu">
		<ul class="menu-item">
		
      
        
      
			<li><a href="http://epijim.uk/" >Home</a></li>
		
      
        
      
			<li><a href="http://epijim.uk/my-papers/" >Papers</a></li>
		
      
        
      
			<li><a href="http://epijim.uk/about/" >About</a></li>
		
      
        
      
			<li><a href="http://epijim.uk/terms/" >Legal</a></li>
		
		</ul>
	</nav><!-- /.bottom-menu -->
	<p class="copyright">&#169; 2014 <a href="http://epijim.uk">James Black</a> hosted by <a href="https://pages.github.com">Github</a> and powered by <a href="http://jekyllrb.com">Jekyll</a> + <a href="http://mmistakes.github.io/skinny-bones-jekyll/">Skinny Bones</a>.</p>
<!-- google analytics -->	
<script> 
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47906301-1', 'auto');
  ga('send', 'pageview');

</script>
</footer>
    </div>

    <script src="http://epijim.uk/js/vendor/jquery-1.9.1.min.js"></script>
    <script src="http://epijim.uk/js/main.js"></script>
    
    
    <script type="text/javascript">
      $('.toc').toc({
        'selectors': 'h2', //elements to use as headings
        'container': '.page-content', //element to find all selectors in
        'smoothScrolling': true, //enable or disable smooth scrolling on click
        'prefix': 'toc', //prefix for anchor tags and class names
        'onHighlight': function(el) {}, //called when a new section is highlighted 
        'highlightOnScroll': true, //add class to heading that is currently in focus
        'highlightOffset': 100, //offset to trigger the next headline
        'anchorName': function(i, heading, prefix) { //custom function for anchor name
          return prefix+i;
        },
        'headerText': function(i, heading, $heading) { //custom function building the header-item text
          return $heading.text();
        },
        'itemClass': function(i, heading, $heading, prefix) { //custom function for item class
          return $heading[0].tagName.toLowerCase();
        }
      });
    </script>
    

  </body>

</html>
